<%#
  Mobile/Tablet Sidebar for Document Editor

  Displays a slide-in sidebar with overlay for mobile and tablet devices.
  Contains the same panel content as the desktop sidebar.

  Expected Alpine.js context (from documentEditController):
    - showRightSidebar: Boolean
    - isDesktop: Boolean
    - activeSidebarPanel: String ('information', 'linked_pages', 'actions')
    - closeMobileSidebar(): Function
%>

<!-- Mobile/Tablet Right Sidebar Overlay -->
<div x-show="showRightSidebar && !isDesktop" x-cloak
     x-transition:enter="transition-opacity ease-linear duration-200"
     x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100"
     x-transition:leave="transition-opacity ease-linear duration-200"
     x-transition:leave-start="opacity-100"
     x-transition:leave-end="opacity-0"
     @click="closeMobileSidebar()"
     @keydown.escape.window="closeMobileSidebar()"
     class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40"
     role="presentation"
     aria-hidden="true">
</div>

<!-- Mobile/Tablet Right Sidebar -->
<div x-show="showRightSidebar && !isDesktop" x-cloak
     x-transition:enter="transform transition ease-in-out duration-200"
     x-transition:enter-start="translate-x-full"
     x-transition:enter-end="translate-x-0"
     x-transition:leave="transform transition ease-in-out duration-200"
     x-transition:leave-start="translate-x-0"
     x-transition:leave-end="translate-x-full"
     @keydown.escape="closeMobileSidebar()"
     class="lg:hidden fixed right-0 top-14 h-screen-minus-nav w-80 bg-white dark:bg-gray-800 border-l border-gray-200 dark:border-gray-700 shadow-xl z-50 overflow-y-auto"
     role="dialog"
     aria-modal="true"
     :aria-labelledby="activeSidebarPanel === 'information' ? 'mobile-information-title' : activeSidebarPanel === 'actions' ? 'mobile-actions-title' : 'mobile-entities-title'">

  <!-- Mobile Header - Dynamic based on active panel -->
  <div class="p-3 border-b border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900">
    <button @click="closeMobileSidebar()"
            class="flex items-center hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors p-1.5 -ml-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500"
            :aria-label="activeSidebarPanel === 'information' ? 'Close Information' : activeSidebarPanel === 'actions' ? 'Close Actions' : 'Close Linked Pages'">
      <i class="material-icons text-gray-500 dark:text-gray-400 text-lg mr-1">chevron_right</i>
      <div class="w-6 h-6 rounded-full bg-notebook-blue flex items-center justify-center mr-1.5">
        <i class="material-icons text-white text-xs" x-text="activeSidebarPanel === 'information' ? 'info' : activeSidebarPanel === 'actions' ? 'bolt' : 'link'"></i>
      </div>
      <h2 :id="activeSidebarPanel === 'information' ? 'mobile-information-title' : activeSidebarPanel === 'actions' ? 'mobile-actions-title' : 'mobile-entities-title'"
          class="text-sm font-semibold text-gray-900 dark:text-white"
          x-text="activeSidebarPanel === 'information' ? 'Information' : activeSidebarPanel === 'actions' ? 'Actions' : 'Linked Pages'"></h2>
    </button>
  </div>

  <!-- Information Panel -->
  <div x-show="activeSidebarPanel === 'information'">
    <%= render partial: 'documents/information_sidebar' %>
  </div>

  <!-- Linked Pages Panel -->
  <div x-show="activeSidebarPanel === 'linked_pages'" x-data="documentEntitiesSidebar()" >
    <%= render partial: 'documents/entities_sidebar' %>
  </div>

  <!-- Actions Panel -->
  <div x-show="activeSidebarPanel === 'actions'">
    <%= render partial: 'documents/actions_sidebar' %>
  </div>
</div>
