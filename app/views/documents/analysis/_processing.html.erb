<div class="max-w-3xl mx-auto px-4 py-12">
  <!-- Header -->
  <div class="text-center mb-12">
    <div class="inline-flex items-center justify-center w-16 h-16 rounded-full mb-6 bg-white border-2 shadow-sm" style="border-color: <%= Document.hex_color %>">
      <svg class="w-7 h-7 animate-spin" style="animation-duration: 2s; color: <%= Document.hex_color %>" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
      </svg>
    </div>
    <h1 class="text-3xl font-bold text-gray-900 mb-3">
      Your document is being analyzed
    </h1>
    <p class="text-gray-600">
      This usually takes just a few minutes. You'll get a notification when it's ready.
    </p>
  </div>

  <!-- Progress Card -->
  <div class="bg-white rounded-lg border shadow-sm p-8 mb-8">
    <div class="flex items-center justify-between mb-3">
      <span class="text-sm font-medium text-gray-700 uppercase tracking-wide">Overall Progress</span>
      <span class="text-2xl font-bold text-gray-900"><%= analysis.progress %>%</span>
    </div>
    <div class="h-2 bg-gray-100 rounded-full overflow-hidden">
      <div class="h-full rounded-full transition-all duration-500"
           style="width: <%= analysis.progress %>%; background-color: <%= Document.hex_color %>"></div>
    </div>
  </div>

  <!-- Analysis Steps -->
  <div class="space-y-3 mb-12">
    <!-- Word Choice -->
    <div class="bg-white rounded-lg border shadow-sm overflow-hidden">
      <div class="p-5">
        <div class="flex items-center gap-4">
          <div class="flex-shrink-0">
            <% if analysis && analysis.progress >= 25 %>
              <div class="w-10 h-10 rounded-full bg-green-50 flex items-center justify-center">
                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z" />
                </svg>
              </div>
            <% else %>
              <div class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center">
                <div class="w-2 h-2 rounded-full animate-pulse" style="background-color: <%= Document.hex_color %>"></div>
              </div>
            <% end %>
          </div>
          <div class="flex-1">
            <h3 class="font-semibold text-gray-900">Word Choice</h3>
            <p class="text-sm text-gray-500">
              <% if analysis && analysis.progress >= 25 %>
                Complete
              <% else %>
                Analyzing vocabulary and word patterns...
              <% end %>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Readability -->
    <div class="bg-white rounded-lg border shadow-sm overflow-hidden">
      <div class="p-5">
        <div class="flex items-center gap-4">
          <div class="flex-shrink-0">
            <% if analysis && analysis.progress >= 50 %>
              <div class="w-10 h-10 rounded-full bg-green-50 flex items-center justify-center">
                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z" />
                </svg>
              </div>
            <% else %>
              <div class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center">
                <div class="w-2 h-2 rounded-full animate-pulse" style="background-color: <%= Document.hex_color %>"></div>
              </div>
            <% end %>
          </div>
          <div class="flex-1">
            <h3 class="font-semibold text-gray-900">Readability</h3>
            <p class="text-sm text-gray-500">
              <% if analysis && analysis.progress >= 50 %>
                Complete
              <% else %>
                Analyzing reading level and complexity...
              <% end %>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Entities -->
    <div class="bg-white rounded-lg border shadow-sm overflow-hidden">
      <div class="p-5">
        <div class="flex items-center gap-4">
          <div class="flex-shrink-0">
            <% if analysis && analysis.progress >= 75 %>
              <div class="w-10 h-10 rounded-full bg-green-50 flex items-center justify-center">
                <svg class="w-5 h-5 text-green-600" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z" />
                </svg>
              </div>
            <% else %>
              <div class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center">
                <div class="w-2 h-2 rounded-full animate-pulse" style="background-color: <%= Document.hex_color %>"></div>
              </div>
            <% end %>
          </div>
          <div class="flex-1">
            <h3 class="font-semibold text-gray-900">Entities</h3>
            <p class="text-sm text-gray-500">
              <% if analysis && analysis.progress >= 75 %>
                Complete
              <% else %>
                Extracting characters and locations...
              <% end %>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Emotion -->
    <div class="bg-white rounded-lg border shadow-sm overflow-hidden">
      <div class="p-5">
        <div class="flex items-center gap-4">
          <div class="flex-shrink-0">
            <div class="w-10 h-10 rounded-full bg-gray-50 flex items-center justify-center">
              <div class="w-2 h-2 rounded-full animate-pulse" style="background-color: <%= Document.hex_color %>"></div>
            </div>
          </div>
          <div class="flex-1">
            <h3 class="font-semibold text-gray-900">Emotion</h3>
            <p class="text-sm text-gray-500">Analyzing sentiment and emotional tone...</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="text-center">
    <%= link_to analysis_document_path(analysis.document),
        class: "inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium shadow-sm hover:shadow transition-all",
        style: "background-color: #{Document.hex_color}" do %>
      <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
        <path d="M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z" />
      </svg>
      Refresh page
    <% end %>
    <p class="text-sm text-gray-500 mt-4">
      <% if analysis.progress > 0 %>
        Your analysis is currently processing
      <% else %>
        Queued <%= time_ago_in_words analysis.created_at %> ago
      <% end %>
    </p>
  </div>
</div>
