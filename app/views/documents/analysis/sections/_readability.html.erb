<div class="bg-white dark:bg-gray-800 rounded-lg border dark:border-gray-700 shadow-sm overflow-hidden">
  <details class="group">
    <summary class="cursor-pointer">
      <div class="p-6 bg-green-50 dark:bg-green-900">
        <div class="flex items-start gap-6">
          <div class="text-center">
            <div class="text-5xl font-bold text-green-700 dark:text-green-300 mb-1"><%= analysis.readability_score %></div>
            <div class="text-xs font-semibold text-green-600 dark:text-green-400 uppercase tracking-wide">Score</div>
          </div>
          <div class="flex-1">
            <h2 class="text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2">
              <%= Documents::Analysis::ReadabilityService.readability_score_category(analysis.readability_score) %>
            </h2>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              <%= Documents::Analysis::ReadabilityService.readability_score_text(analysis) %>
            </p>
            <button class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 mt-2">
              How is this calculated? â†’
            </button>
          </div>
        </div>
      </div>
    </summary>
    <div class="border-t dark:border-gray-700 p-6">
      <h3 class="font-semibold text-gray-900 dark:text-gray-100 mb-3">Readability scales</h3>
      <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
        We compute several well-known readability scores on your text. For all scales other than the Flesch-Kincaid reading ease, a higher score means greater difficulty reading.
      </p>
      <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
        We take a weighted composite score of all readability scales to give you a singular readability score.
      </p>
      <ul class="space-y-3">
        <% if analysis.flesch_kincaid_reading_ease %>
          <li>
            <div class="font-semibold">Flesch-Kincaid reading ease: <%= analysis.flesch_kincaid_reading_ease.try(:round) %> / 100</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.flesch_kincaid_reading_ease.try(:round) / 100 %>%"></div>
            </div>
          </li>
        <% end %>
        <% if analysis.flesch_kincaid_grade_level %>
          <li>
            <div class="font-semibold">Flesch-Kincaid grade level: <%= analysis.flesch_kincaid_grade_level.try(:round) %> / 16</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.flesch_kincaid_grade_level.try(:round) / 16 %>%"></div>
            </div>
          </li>
        <% end %>
        <% if analysis.flesch_kincaid_age_minimum %>
          <li>
            <div class="font-semibold">Flesch-Kincaid age minimum: <%= analysis.flesch_kincaid_age_minimum.try(:round) %> / 20</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.flesch_kincaid_age_minimum.try(:round) / 20 %>%"></div>
            </div>
          </li>
        <% end %>
        <% if analysis.forcast_grade_level %>
          <li>
            <div class="font-semibold">Forcast grade level: <%= analysis.forcast_grade_level.try(:round) %> / 16</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.forcast_grade_level.try(:round) / 16 %>%"></div>
            </div>
          </li>
        <% end %>
        <% if analysis.coleman_liau_index %>
          <li>
            <div class="font-semibold">Coleman liau index: <%= analysis.coleman_liau_index.try(:round) %> / 16</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.coleman_liau_index.try(:round) / 16 %>%"></div>
            </div>
          </li>
        <% end %>
        <% if analysis.automated_readability_index %>
          <li>
            <div class="font-semibold">Automated readability index: <%= analysis.automated_readability_index.try(:round) %> / 16</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.automated_readability_index.try(:round) / 16 %>%"></div>
            </div>
          </li>
        <% end %>
        <% if analysis.gunning_fog_index %>
          <li>
            <div class="font-semibold">Gunning fog index: <%= analysis.gunning_fog_index.try(:round) %> / 16</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.gunning_fog_index.try(:round) / 16 %>%"></div>
            </div>
          </li>
        <% end %>
        <% if analysis.smog_grade %>
          <li>
            <div class="font-semibold">SMOG grade: <%= analysis.smog_grade.try(:round) %> / 16</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.smog_grade.try(:round) / 16 %>%"></div>
            </div>
          </li>
        <% end %>
        <% if analysis.combined_average_reading_level %>
          <li>
            <div class="font-semibold">Combined average reading level: <%= analysis.combined_average_reading_level.try(:round) %> / 16</div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-1">
              <div class="bg-green-600 h-2 rounded-full" style="width: <%= 100 * analysis.combined_average_reading_level.try(:round) / 16 %>%"></div>
            </div>
          </li>
        <% end %>
      </ul>
    </div>
  </details>
</div>
