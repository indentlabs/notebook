<% if analysis.document_concepts.relevant.any? %>
  <div>
    <div class="flex items-center justify-between mb-3">
      <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 flex items-center gap-2">
        <svg class="w-4 h-4 text-teal-500" fill="currentColor" viewBox="0 0 24 24">
          <path d="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z" />
        </svg>
        External References
      </h3>
      <span class="text-xs text-gray-500 dark:text-gray-400"><%= analysis.document_concepts.relevant.count %> found</span>
    </div>

    <div class="flex flex-wrap gap-2">
      <% analysis.document_concepts.relevant.each do |concept| %>
        <%= link_to concept.reference_link, target: '_blank', rel: 'noopener', class: 'group inline-flex items-center gap-1.5 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 hover:bg-teal-100 dark:hover:bg-teal-900 text-gray-700 dark:text-gray-300 hover:text-teal-700 dark:hover:text-teal-300 rounded-lg text-sm transition' do %>
          <%= concept.text %>
          <svg class="w-3.5 h-3.5 opacity-50 group-hover:opacity-100 transition" fill="currentColor" viewBox="0 0 24 24">
            <path d="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z" />
          </svg>
        <% end %>
      <% end %>
    </div>

    <p class="text-xs text-gray-500 dark:text-gray-400 mt-3">
      Click any reference to learn more about real-world concepts detected in your writing.
    </p>
  </div>
<% end %>
