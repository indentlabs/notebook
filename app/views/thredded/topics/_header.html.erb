<!-- Topic Actions (Follow button and dropdown) -->
<div class="flex items-center gap-2">
  <!-- Follow/Unfollow Button -->
  <% if thredded_current_user %>
    <% if topic.followed? %>
      <%= button_to topic.unfollow_path, 
          method: :post,
          class: 'inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors' do %>
        <i class="material-icons text-base mr-1">notifications_off</i>
        <%= t('thredded.topics.unfollow') %>
      <% end %>
    <% else %>
      <%= button_to topic.follow_path,
          method: :post,
          class: 'inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-lg text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors' do %>
        <i class="material-icons text-base mr-1">notifications</i>
        <%= t('thredded.topics.follow') %>
      <% end %>
    <% end %>
  <% end %>

  <!-- Actions Dropdown -->
  <div class="relative inline-block text-left">
    <button type="button" 
            class="inline-flex items-center px-3 py-1.5 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 transition-colors"
            onclick="this.nextElementSibling.classList.toggle('hidden')">
      <i class="material-icons">more_vert</i>
    </button>

    <div class="hidden origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-50">
      <div class="py-1" role="menu">
        <% if topic.can_update? %>
          <%= link_to t('thredded.topics.edit'), topic.edit_path,
                      class: 'block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100',
                      rel: 'nofollow' %>
        <% end %>
        
        <% if user_signed_in? && params.key?(:id) %>
          <%= link_to main_app.documentize_topic_path(params[:id]), 
                      class: 'block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100' do %>
            <i class="material-icons text-base mr-2 align-middle">description</i>
            Export to document
          <% end %>
          
          <%= link_to main_app.plaintext_topic_path(params[:id]), 
                      class: 'block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100',
                      rel: 'nofollow' do %>
            <i class="material-icons text-base mr-2 align-middle">text_fields</i>
            View as plaintext
          <% end %>
          
          <%= link_to main_app.irc_log_topic_path(params[:id]), 
                      class: 'block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100',
                      rel: 'nofollow' do %>
            <i class="material-icons text-base mr-2 align-middle">chat</i>
            View as chat log
          <% end %>
        <% end %>
        
        <% if topic.can_destroy? %>
          <hr class="my-1">
          <%= link_to topic.destroy_path, 
                      method: :delete,
                      data: { confirm: t('thredded.topics.delete_confirm') },
                      class: 'block px-4 py-2 text-sm text-red-700 hover:bg-red-50' do %>
            <i class="material-icons text-base mr-2 align-middle">delete</i>
            <%= t('thredded.topics.delete_topic') %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>