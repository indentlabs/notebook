<% has_content = category[:fields].any? { |field| field[:value].present? } %>

<% if has_content %>
  <!-- Clean category container focused on content -->
  <div class="category-section bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden" id="category-<%= category[:label].parameterize %>">
    <!-- Category Fields - clean vertical layout -->
    <div class="p-8">
      <div class="space-y-10">
        <% category[:fields].each do |field| %>
          <% next if field[:value].blank? %>
          
          <div class="field-display">
            <!-- Field Label -->
            <dt class="text-base font-semibold <%= content.class_text_color %> mb-4 flex items-center">
              <%= field[:label] %>
              <% if field[:type] == 'name' %>
                <i class="material-icons text-sm ml-2 text-gray-400">fingerprint</i>
              <% end %>
            </dt>
            
            <!-- Field Content -->
            <dd class="text-gray-800 leading-relaxed">
              <%=
                case field[:type]
                when 'name'
                  render partial: 'content/tailwind_components/fields/name', locals: { field: field }
                when 'text_area', 'textarea'
                  render partial: 'content/tailwind_components/fields/text', locals: { field: field }
                when 'link'
                  render partial: 'content/tailwind_components/fields/link', locals: { field: field }
                when 'universe'
                  render partial: 'content/tailwind_components/fields/universe', locals: { field: field }
                when 'tags'
                  render partial: 'content/tailwind_components/fields/tags', locals: { field: field }
                else
                  content_tag(:div, simple_format(field[:value]), class: "prose prose-gray prose-lg max-w-none leading-relaxed")
                end
              %>
            </dd>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% else %>
  <!-- Empty category state -->
  <div class="text-center py-12">
    <div class="mx-auto h-16 w-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
      <i class="material-icons text-2xl text-gray-400"><%= category[:icon] %></i>
    </div>
    <h3 class="text-lg font-medium text-gray-900 mb-2">
      No <%= category[:label].downcase %> information yet
    </h3>
    <p class="text-gray-500 mb-6">
      This section doesn't have any information filled in yet.
    </p>
    <% if defined?(raw_content) && raw_content.updatable_by?(current_user) %>
      <%= link_to polymorphic_path(raw_content, action: :edit), 
                  class: "inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white #{content.class_color} hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" do %>
        <i class="material-icons text-lg mr-2">edit</i>
        Add <%= category[:label] %> Information
      <% end %>
    <% end %>
  </div>
<% end %>