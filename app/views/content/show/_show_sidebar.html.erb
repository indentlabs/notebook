<div class="pl-6 lg:w-80 px-6 pt-6">
  <!-- Page Information -->
  <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6 p-4">
    <h3 class="text-sm font-medium text-gray-900 mb-3">Page Information</h3>
    
    <!-- Content stats -->
    <div class="grid grid-cols-1 gap-3 text-sm">
      <div class="flex justify-between">
        <span class="text-gray-500">Word count:</span>
        <span class="text-gray-900 font-medium"><%= number_with_delimiter(content.cached_word_count || 0) %></span>
      </div>
      
      <div class="flex justify-between">
        <span class="text-gray-500">Created:</span>
        <span class="text-gray-900 font-medium" title="<%= @content.created_at.strftime('%B %d, %Y at %I:%M %p') %>">
          <%= distance_of_time_in_words(@content.created_at, Time.current) %> ago
        </span>
      </div>
      
      <div class="flex justify-between">
        <span class="text-gray-500">Last updated:</span>
        <span class="text-gray-900 font-medium" title="<%= @content.updated_at.strftime('%B %d, %Y at %I:%M %p') %>">
          <%= distance_of_time_in_words(@content.updated_at, Time.current) %> ago
        </span>
      </div>
      
      <% if @content.respond_to?(:privacy) %>
        <div class="flex justify-between">
          <span class="text-gray-500">Visibility:</span>
          <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium <%= @content.privacy == 'public' ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800' %>">
            <% if @content.privacy == 'public' %>
              <i class="material-icons text-sm mr-1">public</i>
              Public
            <% else %>
              <i class="material-icons text-sm mr-1">lock</i>
              Private
            <% end %>
          </span>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Quick Actions -->
  <% if @content.updatable_by?(current_user) %>
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6 p-4">
      <h3 class="text-sm font-medium text-gray-900 mb-3">Quick Actions</h3>
      <div class="space-y-2">
        <%= link_to polymorphic_path(@content, action: :edit), 
                    class: "w-full inline-flex items-center justify-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white #{content.class_color} hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" do %>
          <i class="material-icons text-lg mr-2">edit</i>
          Edit This Page
        <% end %>
        
        <% if @content.respond_to?(:gallery_path) %>
          <%= link_to send("gallery_#{@content.class.name.downcase}_path", @content), 
                      class: "w-full inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" do %>
            <i class="material-icons text-lg mr-2">photo_library</i>
            View Gallery
          <% end %>
        <% end %>
        
        <%= link_to send("references_#{@content.class.name.downcase}_path", @content), 
                    class: "w-full inline-flex items-center justify-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500" do %>
          <i class="material-icons text-lg mr-2">link</i>
          View References
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Page Contents / Navigation -->
  <% categories_with_content = content.data[:categories].select { |cat| cat[:fields].any? { |field| field[:value].present? } && cat[:label] != 'Gallery' } %>
  <% if categories_with_content.any? %>
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6 p-4">
      <h3 class="text-sm font-medium text-gray-900 mb-3">On This Page</h3>
      <div class="space-y-1">
        <% categories_with_content.each do |category| %>
          <button type="button" 
                  onclick="document.getElementById('<%= category[:label] %>').scrollIntoView({behavior: 'smooth'})"
                  class="flex items-center w-full text-left px-3 py-2 text-sm rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <i class="material-icons text-sm <%= content.class_text_color %> mr-2"><%= category[:icon] %></i>
            <span class="text-gray-700"><%= category[:label] %></span>
          </button>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Related Content -->
  <% if @content.respond_to?(:universe_id) && @content.universe_id.present? %>
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6 p-4">
      <h3 class="text-sm font-medium text-gray-900 mb-3">In This Universe</h3>
      <div class="text-sm">
        <% if @content.universe %>
          <%= link_to @content.universe, class: "flex items-center px-3 py-2 rounded-md hover:bg-gray-50 #{Universe.text_color} hover:underline" do %>
            <i class="material-icons text-sm mr-2"><%= Universe.icon %></i>
            <%= @content.universe.name %>
          <% end %>
        <% end %>
        
        <!-- Other content in this universe -->
        <% other_content = @content.class.where(universe_id: @content.universe_id).where.not(id: @content.id).limit(5) %>
        <% if other_content.any? %>
          <div class="mt-3 pt-3 border-t border-gray-200">
            <div class="text-xs text-gray-500 mb-2">Other <%= @content.class.name.pluralize.downcase %>:</div>
            <% other_content.each do |item| %>
              <%= link_to item, class: "block px-3 py-1 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded" do %>
                <%= item.name %>
              <% end %>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Tags -->
  <% if @content.respond_to?(:page_tags) && @content.page_tags.any? %>
    <div class="bg-white rounded-lg shadow-sm border border-gray-200 mb-6 p-4">
      <h3 class="text-sm font-medium text-gray-900 mb-3">Tags</h3>
      <div class="flex flex-wrap gap-2">
        <% @content.page_tags.each do |tag| %>
          <%= link_to polymorphic_path(@content.class, slug: tag.slug), 
                      class: "inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200" do %>
            <%= tag.tag %>
          <% end %>
        <% end %>
      </div>
    </div>
  <% end %>

  <!-- Help Text -->
  <div class="bg-gray-50 rounded-lg p-4 text-xs text-gray-600">
    <h4 class="font-medium text-gray-700 mb-2">Viewing Tips</h4>
    <div class="space-y-1">
      <div>• Use the "Jump to..." menu to navigate sections</div>
      <div>• Click section titles in the sidebar to scroll</div>
      <% if @content.updatable_by?(current_user) %>
        <div>• Click "Edit This Page" to make changes</div>
      <% end %>
      <div>• This page is optimized for printing</div>
    </div>
  </div>
</div>