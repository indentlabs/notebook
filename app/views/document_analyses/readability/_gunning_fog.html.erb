<% if analysis.gunning_fog_index %>
  <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm overflow-hidden mb-6">
    <div class="p-6">
      <!-- Header with score -->
      <div class="flex items-center justify-between mb-4">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-lg bg-orange-100 dark:bg-orange-900 flex items-center justify-center">
            <svg class="w-5 h-5 text-orange-600 dark:text-orange-400" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4M9,8.5A1.5,1.5 0 0,0 7.5,10A1.5,1.5 0 0,0 9,11.5A1.5,1.5 0 0,0 10.5,10A1.5,1.5 0 0,0 9,8.5M15,8.5A1.5,1.5 0 0,0 13.5,10A1.5,1.5 0 0,0 15,11.5A1.5,1.5 0 0,0 16.5,10A1.5,1.5 0 0,0 15,8.5"/>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100">Gunning Fog Index</h3>
        </div>
        <span class="text-lg font-bold text-gray-900 dark:text-gray-100"><%= analysis.gunning_fog_index.try(:round) %> / 16</span>
      </div>

      <!-- Progress bar -->
      <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mb-6">
        <div class="bg-orange-500 h-2 rounded-full" style="width: <%= (100 * (analysis.gunning_fog_index.try(:round) || 0) / 16.0).round %>%"></div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Description -->
        <div class="lg:col-span-2 space-y-4 text-gray-600 dark:text-gray-400">
          <p>
            According to this scale, your document is
            <% if analysis.gunning_fog_index.round > 12 %>
              <strong class="text-gray-900 dark:text-gray-100">
                Understandable by a <%= (analysis.gunning_fog_index.round - 12).ordinalize %>-year college student.
              </strong>
            <% else %>
              <strong class="text-gray-900 dark:text-gray-100">
                Understandable by a <%= analysis.gunning_fog_index.round.ordinalize %>-grade reader.
              </strong>
            <% end %>
          </p>
          <p>
            The Gunning fog index was developed by Robert Gunning in 1952 after working in newspaper and textbook publishing. It is
            primarily used to ensure that text can be easily read by a large audience. The index was refined in the 80s to more accurately
            measure and incorporate sentence complexity.
          </p>
          <p>
            In general, texts intended for a wide audience are recommended to have a fog index of no more than 12. Texts requiring
            near-universal understanding and comprehension are recommended to keep their fog index below 8.
          </p>
          <p>
            A <strong class="text-gray-900 dark:text-gray-100">higher score</strong> on this scale indicates a document is <strong class="text-red-600 dark:text-red-400">harder to understand</strong>.
          </p>
        </div>

        <!-- Tips -->
        <div class="space-y-4">
          <div class="p-4 bg-red-50 dark:bg-red-900 rounded-lg">
            <p class="text-red-700 dark:text-red-300 font-medium mb-2">To raise your score:</p>
            <ul class="text-sm text-red-600 dark:text-red-400 space-y-1">
              <li class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M7,15L12,10L17,15H7Z"/></svg>
                Use more words of at least three syllables.
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M7,15L12,10L17,15H7Z"/></svg>
                Use more complex words.
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M7,15L12,10L17,15H7Z"/></svg>
                Use longer sentences.
              </li>
            </ul>
          </div>
          <div class="p-4 bg-green-50 dark:bg-green-900 rounded-lg">
            <p class="text-green-700 dark:text-green-300 font-medium mb-2">To lower your score:</p>
            <ul class="text-sm text-green-600 dark:text-green-400 space-y-1">
              <li class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M7,10L12,15L17,10H7Z"/></svg>
                Use more one- and two-syllable words.
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M7,10L12,15L17,10H7Z"/></svg>
                Use simpler words.
              </li>
              <li class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M7,10L12,15L17,10H7Z"/></svg>
                Use shorter sentences.
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>
