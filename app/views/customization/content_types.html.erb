<div>
  <!-- Header -->
  <div class="relative pb-32 bg-gray-800">
    <div class="absolute inset-0">
      <%= image_tag 'card-headers/more.webp', class: 'w-full h-full object-cover', alt: '' %>
      <div class="absolute inset-0 bg-notebook-blue mix-blend-multiply" aria-hidden="true"></div>
    </div>
    <div class="relative max-w-7xl mx-auto py-24 px-4 sm:py-32 sm:px-6 lg:px-8">
      <h1 class="text-4xl font-extrabold tracking-tight text-white md:text-5xl lg:text-6xl">Make your notebook <em>yours</em></h1>
      <p class="mt-6 max-w-3xl text-xl text-gray-300">
        Enable the page types you want to use &mdash; and disable the ones you don't. You can always change your mind later.
      </p>
    </div>
  </div>

  <!-- Overlapping cards -->
  <section class="-mt-32 max-w-7xl mx-auto relative z-10 pb-32 px-4 sm:px-6 lg:px-8" aria-labelledby="contact-heading">
    <h2 class="sr-only" id="contact-heading">Contact us</h2>
    <div class="grid grid-cols-1 gap-y-20 lg:grid-cols-3 lg:gap-y-0 lg:gap-x-8">
      <div class="flex flex-col bg-white rounded-2xl shadow-xl">
        <div class="flex-1 relative pt-16 px-6 pb-8 md:px-8">
          <div class="absolute top-0 p-5 inline-block bg-pink-400 rounded-xl shadow-lg transform -translate-y-1/2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-white">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
          </div>
          <h3 class="text-xl font-medium text-gray-900">Choose your page templates</h3>
          <p class="mt-4 text-base text-gray-500">
            Add or remove templates across the site at any time by toggling them here. Disabled templates are hidden, but not deleted.
          </p>
        </div>
        <div class="p-6 bg-gray-50 rounded-bl-2xl rounded-br-2xl md:px-8">
          <!--
          <a href="#" class="text-base font-medium text-pink-700 hover:text-indigo-600">
            Help me choose<span aria-hidden="true"> &rarr;</span>
          </a>
          -->
        </div>
      </div>

      <div class="flex flex-col bg-white rounded-2xl shadow-xl">
        <div class="flex-1 relative pt-16 px-6 pb-8 md:px-8">
          <div class="absolute top-0 p-5 inline-block bg-pink-400 rounded-xl shadow-lg transform -translate-y-1/2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-white">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 11-3 0m3 0a1.5 1.5 0 10-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m-9.75 0h9.75" />
            </svg>

          </div>
          <h3 class="text-xl font-medium text-gray-900">Customize your templates</h3>
          <p class="mt-4 text-base text-gray-500">
            Each page template comes with a thorough set of categories and questions &mdash; which you can fully customize.
          </p>
        </div>
        <div class="p-6 bg-gray-50 rounded-bl-2xl rounded-br-2xl md:px-8">
          <a href="#" class="text-base font-medium text-indigo-700 hover:text-indigo-600">Learn about templates<span aria-hidden="true"> &rarr;</span></a>
        </div>
      </div>

      <div class="flex flex-col bg-white rounded-2xl shadow-xl">
        <div class="flex-1 relative pt-16 px-6 pb-8 md:px-8">
          <div class="absolute top-0 p-5 inline-block bg-pink-400 rounded-xl shadow-lg transform -translate-y-1/2">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-white">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9 5.25h.008v.008H12v-.008z" />
            </svg>
          </div>
          <h3 class="text-xl font-medium text-gray-900">Can I suggest more?</h3>
          <p class="mt-4 text-base text-gray-500">
            Absolutely! The site is always improving and we're always looking for more ideas. Just let us know what you'd like to see.
          </p>
        </div>
        <div class="p-6 bg-gray-50 rounded-bl-2xl rounded-br-2xl md:px-8">
          <%= link_to 'https://docs.google.com/forms/d/1PFOaa97Cu3vrceUvcuFT6nyITaMwR-4wQSarUdVoPSg/edit', target: '_new', class: 'text-base font-medium text-indigo-700 hover:text-indigo-600' do %>
            Suggest a new template
          <% end %>
        </div>
      </div>
    </div>
  </section>
</div>

<div class="max-w-7xl mx-auto py-4 sm:px-6 lg:px-8">
  <div class="border-b border-gray-200">
    <div class="sm:flex sm:items-baseline px-4 md:px-0">
      <h1 class="text-xl leading-10 font-medium text-gray-900">
        Free page templates
      </h1>
      <div class="mt-4 sm:mt-0 sm:ml-10">
        <div class="-mb-px flex space-x-8 text-gray-500">
          The core worldbuilding trifecta are free forever &mdash; for everyone.
        </div>
      </div>
    </div>
  </div>
</div>

<% Rails.application.config.content_types[:free].each do |content_type| %>
  <% next if content_type.name == Universe.name %>
  <div class="pt-8 lg:py-16">
    <div class="pb-16 <%= content_type.color %> lg:pb-0 lg:z-10 lg:relative shadow">
      <div class="lg:mx-auto lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-3 lg:gap-8">
        <div class="relative lg:-my-8">
          <div aria-hidden="true" class="absolute inset-x-0 top-0 h-1/2 bg-white lg:hidden"></div>
          <div class="mx-auto max-w-md px-4 sm:max-w-3xl sm:px-6 lg:p-0 lg:h-full">
            <div class="aspect-w-10 aspect-h-6 rounded-xl shadow-xl overflow-hidden sm:aspect-w-16 sm:aspect-h-7 lg:aspect-none lg:h-full">
              <%= image_tag "card-headers/#{content_type.name.downcase.pluralize}.webp", class: 'object-cover lg:h-full lg:w-full', alt: content_type.name.downcase.pluralize %>
            </div>
          </div>
        </div>
        <div class="mt-12 lg:m-0 lg:col-span-2 lg:pl-8">
          <div class="mx-auto max-w-md px-4 sm:max-w-2xl sm:px-6 lg:px-0 lg:py-8 lg:max-w-none">
            <blockquote class="text-black bg-white p-4 rounded-xl">
              <div>
                <div class="flex">
                  <i class="material-icons <%= content_type.text_color %> text-6xl mr-4"><%= content_type.icon %></i>
                  <div class="flex-grow">
                    <div class="text-xl font-medium">
                      <%= content_type.name.pluralize %>
                    </div>
                    <div class="text-gray-500">
                      <%= t("content_oneliners.#{content_type.name.downcase}") %>
                    </div>
                  </div>
                </div>
                <p class="mt-6 text-xl">
                  <%= t("content_descriptions.#{content_type.name.downcase}") %>
                </p>
                <div class="flex items-center justify-between">
                  <span class="flex-grow flex flex-col">
                    <span class="text-sm font-medium text-gray-900" id="availability-label">Free page template</span>
                    <span class="text-sm text-gray-500" id="availability-description">
                      <% if user_signed_in? %>
                        You've created <%= pluralize @current_user_content.fetch(content_type.name, []).count, "page" %> with this template.
                      <% else %>
                        Users have created <%= pluralize content_type.last.try(:id) || 0, "page" %> with this template.
                      <% end %>
                    </span>
                  </span>
                  <% if user_signed_in? %>
                    <div x-data="{ enabled: <%= @my_activators.include?(content_type.name) %> }" data-content-type="<%= content_type.name %>">
                      <button type="button"
                              class="{{ enabled ? '<%= content_type.color %>' : 'bg-gray-200' }} relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-notebook-blue"
                              role="switch"
                              aria-checked="{{ enabled }}"
                              x-on:click="enabled = !enabled; togglePageType('<%= content_type.name %>', enabled)"
                              x-bind:class="enabled ? '<%= content_type.color %>' : 'bg-gray-200'">
                        <span aria-hidden="true" 
                              class="translate-x-5 pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"
                              :class="{ 'translate-x-5': enabled, 'translate-x-0': !enabled }"></span>
                      </button>
                      <noscript>
                        <%= form_tag '/customization/toggle_content_type' do %>
                          <%= hidden_field_tag 'content_type', content_type.name %>
                          <%= hidden_field_tag 'active', @my_activators.include?(content_type.name) ? 'off' : 'on' %>
                          <button type="submit"
                                  class="<%= @my_activators.include?(content_type.name) ? content_type.color : 'bg-gray-200' %> relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-notebook-blue"
                                  role="switch"
                                  aria-checked="<%= @my_activators.include?(content_type.name) ? 'true' : 'false' %>">
                            <span aria-hidden="true"
                                  class="translate-x-5 pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"
                                  :class="{ 'translate-x-5': <%= @my_activators.include?(content_type.name) %>, 'translate-x-0': <%= !@my_activators.include?(content_type.name) %> }"></span>
                          </button>
                        <% end %>
                      </noscript>
                    </div>
                  <% else %>
                    <%= link_to send("#{content_type.name.downcase}_worldbuilding_info_path") do %>
                      <button type="button" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        About <%= content_type.name.pluralize %>
                      </button>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </blockquote>

            
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>

<div class="py-16 mb-16 overflow-hidden">
  <div class="relative max-w-xl mx-auto px-4 sm:px-6 lg:px-8 lg:max-w-7xl">

    <svg class="hidden lg:block absolute right-full transform translate-x-1/2 translate-y-12" width="404" height="784" fill="none" viewBox="0 0 404 784" aria-hidden="true">
      <defs>
        <pattern id="64e643ad-2176-4f86-b3d7-f2c5da3b6a6d" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse">
          <rect x="0" y="0" width="4" height="4" class="text-gray-200" fill="currentColor" />
        </pattern>
      </defs>
      <rect width="404" height="784" fill="url(#64e643ad-2176-4f86-b3d7-f2c5da3b6a6d)" />
    </svg>

    <div class="relative mt-12 ">
      <div class="lg:grid lg:grid-flow-row-dense lg:grid-cols-2 lg:gap-8 lg:items-center">
        <div class="lg:col-start-2">
          <h3 class="text-2xl font-extrabold text-gray-900 tracking-tight sm:text-3xl">
            <i class="material-icons float-left <%= Universe.text_color %> text-3xl mr-2"><%= Universe.icon %></i>
            Universes
          </h3>
          <p class="mt-3 text-lg text-gray-500">
            <%= t("content_descriptions.universe") %>
          </p>

          <dl class="mt-10 space-y-10">
            <div class="relative">
              <dt>
                <div class="absolute flex items-center justify-center h-12 w-12 rounded-md <%= Universe.color %> text-white">
                  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 9.776c.112-.017.227-.026.344-.026h15.812c.117 0 .232.009.344.026m-16.5 0a2.25 2.25 0 00-1.883 2.542l.857 6a2.25 2.25 0 002.227 1.932H19.05a2.25 2.25 0 002.227-1.932l.857-6a2.25 2.25 0 00-1.883-2.542m-16.5 0V6A2.25 2.25 0 016 3.75h3.879a1.5 1.5 0 011.06.44l2.122 2.12a1.5 1.5 0 001.06.44H18A2.25 2.25 0 0120.25 9v.776" />
                  </svg>
                </div>
                <p class="ml-16 text-lg leading-6 font-medium text-gray-900">Filter your entire notebook by universe</p>
              </dt>
              <dd class="mt-2 ml-16 text-base text-gray-500">
                Hide everything that isn't relevant to what you're working on right now, but know they're all safe and tucked away.
              </dd>
            </div>
          </dl>
  
          <div class="flex items-center justify-between mt-8">
            <span class="flex-grow flex flex-col">
              <span class="text-sm font-medium text-gray-900" id="availability-label">Free users can create up to 5 universes</span>
              <span class="text-sm text-gray-500" id="availability-description">
                <% if user_signed_in? %>
                  You've created <%= pluralize @current_user_content.fetch('Universe', []).count, "page" %> with this template.
                <% else %>
                  Users have created <%= pluralize Universe.last.try(:id) || 0, "page" %> with this template.
                <% end %>
              </span>
            </span>
            <% if user_signed_in? %>
              <div x-data="{ enabled: <%= @my_activators.include?(Universe.name) %> }" data-content-type="<%= Universe.name %>">
                <button type="button"
                        class="{{ enabled ? '<%= Universe.color %>' : 'bg-gray-200' }} relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-notebook-blue"
                        role="switch"
                        aria-checked="{{ enabled }}"
                        x-on:click="enabled = !enabled; togglePageType('<%= Universe.name %>', enabled)"
                        x-bind:class="enabled ? '<%= Universe.color %>' : 'bg-gray-200'">
                  <span aria-hidden="true" 
                        class="translate-x-5 pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"
                        :class="{ 'translate-x-5': enabled, 'translate-x-0': !enabled }"></span>
                </button>
                <noscript>
                  <%= form_tag '/customization/toggle_content_type' do %>
                    <%= hidden_field_tag 'content_type', Universe.name %>
                    <%= hidden_field_tag 'active', @my_activators.include?(Universe.name) ? 'off' : 'on' %>
                    <button type="submit"
                            class="<%= @my_activators.include?(Universe.name) ? Universe.color : 'bg-gray-200' %> relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-notebook-blue"
                            role="switch"
                            aria-checked="<%= @my_activators.include?(Universe.name) ? 'true' : 'false' %>">
                      <span aria-hidden="true"
                            class="translate-x-5 pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"
                            :class="{ 'translate-x-5': <%= @my_activators.include?(Universe.name) %>, 'translate-x-0': <%= !@my_activators.include?(Universe.name) %> }"></span>
                    </button>
                  <% end %>
                </noscript>
              </div>
            <% else %>
              <%= link_to send("#{content_type.name.downcase}_worldbuilding_info_path") do %>
                <button type="button" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                  About <%= content_type.name.pluralize %>
                </button>
              <% end %>
            <% end %>
          </div>
        </div>

        <div class="mt-10 -mx-4 relative lg:mt-0 lg:col-start-1">
          <%= image_tag 'card-headers/universes.webp', class: 'relative mx-auto rounded-lg shadow', alt: 'Universes' %>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="bg-notebook-blue">
  <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between">
    <h2 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl">
      <span class="block">Looking for something</span>
      <span class="block text-orange-200">a little more advanced?</span>
    </h2>
    <div class="mt-8 flex lg:mt-0 lg:flex-shrink-0">
      <div class="ml-3 inline-flex rounded-md shadow">
        <a href="#" class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-notebook-blue bg-white hover:bg-indigo-50">
          Learn about Premium pages
        </a>
      </div>
    </div>
  </div>
</div>

<div class="max-w-7xl mx-auto py-4 mt-8 sm:px-6 lg:px-8">
  <div class="border-b border-gray-200">
    <div class="sm:flex sm:items-baseline px-4 md:px-0">
      <h1 class="text-xl leading-10 font-medium text-gray-900">
        Premium page templates
      </h1>
      <div class="mt-4 sm:mt-0 sm:ml-10">
        <div class="-mb-px flex space-x-8 text-gray-500">
          Available to all users with a Premium subscription.
        </div>
      </div>
    </div>
  </div>
</div>

<% Rails.application.config.content_types[:premium].each do |content_type| %>
  <% next if content_type.name == Universe.name %>
  <div class="pt-8 lg:py-16">
    <div class="pb-16 <%= content_type.color %> lg:pb-0 lg:z-10 lg:relative shadow">
      <div class="lg:mx-auto lg:max-w-7xl lg:px-8 lg:grid lg:grid-cols-3 lg:gap-8">
        <div class="relative lg:-my-8">
          <div aria-hidden="true" class="absolute inset-x-0 top-0 h-1/2 bg-white lg:hidden"></div>
          <div class="mx-auto max-w-md px-4 sm:max-w-3xl sm:px-6 lg:p-0 lg:h-full">
            <div class="aspect-w-10 aspect-h-6 rounded-xl shadow-xl overflow-hidden sm:aspect-w-16 sm:aspect-h-7 lg:aspect-none lg:h-full">
              <%= image_tag "card-headers/#{content_type.name.downcase.pluralize}.webp", class: 'object-cover lg:h-full lg:w-full', alt: content_type.name.downcase.pluralize %>
            </div>
          </div>
        </div>
        <div class="mt-12 lg:m-0 lg:col-span-2 lg:pl-8">
          <div class="mx-auto max-w-md px-4 sm:max-w-2xl sm:px-6 lg:px-0 lg:py-8 lg:max-w-none">
            <blockquote class="text-black bg-white p-4 rounded-xl">
              <div>
                <div class="flex">
                  <i class="material-icons <%= content_type.text_color %> text-6xl mr-4"><%= content_type.icon %></i>
                  <div class="flex-grow">
                    <div class="text-xl font-medium">
                      <%= content_type.name.pluralize %>
                    </div>
                    <div class="text-gray-500">
                      <%= t("content_oneliners.#{content_type.name.downcase}") %>
                    </div>
                  </div>
                </div>
                <p class="mt-6 text-xl">
                  <%= t("content_descriptions.#{content_type.name.downcase}") %>
                </p>
                <div class="flex items-center justify-between">
                  <span class="flex-grow flex flex-col">
                    <span class="text-sm font-medium text-gray-900" id="availability-label">Premium page template</span>
                    <span class="text-sm text-gray-500" id="availability-description">
                      <% if user_signed_in? %>
                        You've created <%= pluralize @current_user_content.fetch(content_type.name, []).count, "page" %> with this template.
                      <% else %>
                        Users have created <%= pluralize content_type.last.try(:id) || 0, "page" %> with this template.
                      <% end %>
                    </span>
                  </span>
                  <% if user_signed_in? %>
                    <div x-data="{ enabled: <%= @my_activators.include?(content_type.name) %> }" data-content-type="<%= content_type.name %>">
                      <button type="button"
                              class="{{ enabled ? '<%= content_type.color %>' : 'bg-gray-200' }} relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-notebook-blue"
                              role="switch"
                              aria-checked="{{ enabled }}"
                              x-on:click="enabled = !enabled; togglePageType('<%= content_type.name %>', enabled)"
                              x-bind:class="enabled ? '<%= content_type.color %>' : 'bg-gray-200'">
                        <span aria-hidden="true" 
                              class="translate-x-5 pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"
                              :class="{ 'translate-x-5': enabled, 'translate-x-0': !enabled }"></span>
                      </button>
                      <noscript>
                        <%= form_tag '/customization/toggle_content_type' do %>
                          <%= hidden_field_tag 'content_type', content_type.name %>
                          <%= hidden_field_tag 'active', @my_activators.include?(content_type.name) ? 'off' : 'on' %>
                          <button type="submit"
                                  class="<%= @my_activators.include?(content_type.name) ? content_type.color : 'bg-gray-200' %> relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-notebook-blue"
                                  role="switch"
                                  aria-checked="<%= @my_activators.include?(content_type.name) ? 'true' : 'false' %>">
                            <span aria-hidden="true"
                                  class="translate-x-5 pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200"
                                  :class="{ 'translate-x-5': <%= @my_activators.include?(content_type.name) %>, 'translate-x-0': <%= !@my_activators.include?(content_type.name) %> }"></span>
                          </button>
                        <% end %>
                      </noscript>
                    </div>
                  <% else %>
                    <%= link_to send("#{content_type.name.downcase}_worldbuilding_info_path") do %>
                      <button type="button" class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        About <%= content_type.name.pluralize %>
                      </button>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </blockquote>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>
