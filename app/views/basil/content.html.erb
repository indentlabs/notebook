<!-- Basil Content Page - TailwindCSS Redesign -->
<div class="min-h-screen bg-gradient-to-br from-gray-50 to-purple-50/30">
  <!-- Header with Breadcrumb -->
  <div class="bg-white border-b sticky top-0 z-10">
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between py-4 space-y-2 sm:space-y-0">
        <nav class="flex items-center space-x-2 text-sm">
          <%= link_to basil_path, class: 'inline-flex items-center text-gray-500 hover:text-gray-700 transition-colors' do %>
            <i class="material-icons text-purple-500 text-lg mr-1">auto_awesome</i>
            <span>Basil</span>
          <% end %>
          <i class="material-icons text-gray-400 text-sm">chevron_right</i>
          <%= link_to basil_content_index_path(content_type: @content.page_type), class: 'text-gray-500 hover:text-gray-700 transition-colors' do %>
            <span class="hidden sm:inline"><%= @content.page_type.pluralize %></span>
            <span class="sm:hidden"><%= @content.page_type.pluralize.truncate(10) %></span>
          <% end %>
          <i class="material-icons text-gray-400 text-sm">chevron_right</i>
          <span class="font-medium text-gray-900 truncate max-w-[200px] sm:max-w-none"><%= @content.name %></span>
        </nav>
        
        <div class="flex items-center space-x-2 sm:space-x-3">
          <%= link_to @content.view_path, class: 'inline-flex items-center px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors' do %>
            <i class="material-icons text-sm mr-1">visibility</i>
            <span class="hidden sm:inline">View Page</span>
            <span class="sm:hidden">View</span>
          <% end %>
          <%= link_to @content.edit_path, class: 'inline-flex items-center px-2 sm:px-3 py-1.5 text-xs sm:text-sm font-medium text-purple-700 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors' do %>
            <i class="material-icons text-sm mr-1">edit</i>
            Edit
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <%= form_for BasilCommission.new, url: basil_commission_path(@content_type, @content.id), html: { id: 'basil-commission-form' } do |f| %>
    <%= f.hidden_field :style, value: 'realistic', id: 'basil_commission_style' %>
    <%= f.hidden_field :entity_type, value: @content.page_type %>
    <%= f.hidden_field :entity_id, value: @content.id %>
    
    <div class="px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8">
      <div class="grid grid-cols-1 lg:grid-cols-3 xl:grid-cols-4 gap-4 lg:gap-6">
        
        <!-- Left Column: Content Info & Fields -->
        <div class="lg:col-span-1 xl:col-span-1">
          <!-- Content Card -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-4">
            <% if @content.random_image_including_private(format: :medium) %>
              <div class="aspect-w-16 aspect-h-9 bg-gray-100">
                <%= image_tag @content.random_image_including_private(format: :medium), 
                    class: 'w-full h-32 sm:h-40 lg:h-48 object-cover' %>
              </div>
            <% end %>
            
            <div class="p-4 sm:p-5 lg:p-6">
              <div class="flex items-start justify-between mb-3">
                <div class="min-w-0 flex-1">
                  <div class="flex items-center mb-1">
                    <i class="material-icons <%= @content.text_color %> text-sm mr-1.5"><%= @content.icon %></i>
                    <span class="text-xs font-medium text-gray-500 uppercase tracking-wider"><%= @content.page_type %></span>
                  </div>
                  <h2 class="text-xl sm:text-2xl font-bold text-gray-900 truncate"><%= @content.name %></h2>
                </div>
              </div>
              
              <!-- Field Values -->
              <div class="space-y-3">
                <% if @relevant_fields.empty? %>
                  <div class="bg-amber-50 border border-amber-200 rounded-lg p-3">
                    <div class="flex items-start">
                      <i class="material-icons text-amber-600 text-lg mr-2 flex-shrink-0">warning</i>
                      <div class="min-w-0">
                        <p class="text-sm font-semibold text-amber-900 mb-1">More details needed</p>
                        <p class="text-xs text-amber-700">
                          <%= link_to 'Add more fields', @content.edit_path, class: 'underline hover:no-underline' %> 
                          to help Basil generate better images.
                        </p>
                      </div>
                    </div>
                  </div>
                <% else %>
                  <div class="space-y-2">
                    <div class="flex items-center justify-between mb-2">
                      <h3 class="text-sm font-semibold text-gray-900">Field Details</h3>
                      <button type="button" 
                              id="customize-importance-btn"
                              class="text-xs font-medium text-purple-600 hover:text-purple-700 transition-colors">
                        <span class="hidden sm:inline">Customize importance</span>
                        <i class="material-icons text-sm sm:hidden">tune</i>
                      </button>
                    </div>
                    
                    <div class="max-h-[300px] sm:max-h-[400px] overflow-y-auto space-y-2">
                      <% @relevant_fields.each_with_index do |(field, value), index| %>
                        <%= f.hidden_field "field[#{field.id}][label]", value: field.label %>
                        <%= f.hidden_field "field[#{field.id}][value]", value: value %>
                        
                        <div class="border-l-2 border-gray-200 pl-3 py-1 hover:border-purple-400 transition-colors">
                          <div class="flex items-start justify-between">
                            <div class="flex-1 min-w-0 mr-2">
                              <label class="text-xs font-medium text-gray-500 uppercase tracking-wider">
                                <%= field.label %>
                              </label>
                              <p class="text-sm text-gray-900 mt-0.5 break-words">
                                <%= value.presence || "—" %>
                              </p>
                            </div>
                            
                            <!-- Importance Slider (Hidden by default) -->
                            <div class="importance-slider hidden flex-shrink-0 flex items-center space-x-1">
                              <span class="text-xs text-gray-500 hidden sm:inline">Low</span>
                              <%= range_field_tag "basil_commission[field][#{field.id}][importance]", 
                                  @guidance.fetch(field.id.to_s, 1), 
                                  { min: 0, max: 1.3, step: 0.1, 
                                    class: 'w-16 sm:w-20 basil-importance-range',
                                    data: { field_id: field.id } } %>
                              <span class="text-xs text-gray-500 hidden sm:inline">High</span>
                            </div>
                          </div>
                        </div>
                      <% end %>
                    </div>
                  </div>
                  
                  <!-- Importance Help (Hidden by default) -->
                  <div id="importance-help" class="hidden mt-3 p-2 sm:p-3 bg-purple-50 rounded-lg">
                    <p class="text-xs text-purple-700">
                      <strong>Adjust importance:</strong> Drag sliders to control how much Basil focuses on each field. 
                      Set to 0 to ignore a field completely.
                    </p>
                  </div>
                <% end %>
              </div>
            </div>
          </div>
          
          <!-- Premium/Free Tier Notice -->
          <% unless current_user.on_premium_plan? %>
            <div class="bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-3 sm:p-4 text-white">
              <div class="flex items-start">
                <i class="material-icons text-purple-200 mr-2 sm:mr-3 text-lg sm:text-base">auto_awesome</i>
                <div class="flex-1 min-w-0">
                  <h4 class="font-semibold mb-1 text-sm">Free Tier</h4>
                  <p class="text-xs sm:text-sm text-purple-100 mb-2 sm:mb-3">
                    <%= @generated_images_count %> of <%= BasilService::FREE_IMAGE_LIMIT %> free images used
                  </p>
                  <div class="w-full bg-purple-700 rounded-full h-1.5 sm:h-2 mb-2 sm:mb-3">
                    <div class="bg-white rounded-full h-1.5 sm:h-2 transition-all duration-500" 
                         style="width: <%= [(@generated_images_count.to_f / BasilService::FREE_IMAGE_LIMIT * 100), 100].min %>%"></div>
                  </div>
                  <% if @generated_images_count >= BasilService::FREE_IMAGE_LIMIT %>
                    <%= link_to subscription_path, class: 'inline-flex items-center text-xs font-medium bg-white text-purple-700 px-2 sm:px-3 py-1 sm:py-1.5 rounded-lg hover:bg-purple-50 transition-colors' do %>
                      Upgrade for unlimited
                      <i class="material-icons text-sm ml-1">arrow_forward</i>
                    <% end %>
                  <% end %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
        
        <!-- Center Column: Style Selection or Empty State -->
        <div class="lg:col-span-1 xl:col-span-1">
          <% if @relevant_fields.empty? %>
            <!-- Empty State: No fields filled -->
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
              <div class="p-6 sm:p-8 text-center">
                <!-- Icon -->
                <div class="mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4">
                  <i class="material-icons text-gray-400 text-3xl">edit_note</i>
                </div>

                <!-- Title -->
                <h3 class="text-lg sm:text-xl font-semibold text-gray-900 mb-2">
                  More Information Needed
                </h3>

                <!-- Description -->
                <p class="text-sm text-gray-600 mb-6 max-w-sm mx-auto">
                  To generate images for <%= @content.name || "this #{@content.page_type.downcase}" %>,
                  please fill in the following fields:
                </p>

                <!-- Required Fields List -->
                <div class="bg-gray-50 rounded-lg p-4 mb-6 max-w-md mx-auto text-left">
                  <h4 class="text-sm font-semibold text-gray-700 mb-3 flex items-center">
                    <i class="material-icons text-amber-500 text-sm mr-2">checklist</i>
                    Required Fields
                  </h4>
                  <ul class="space-y-2">
                    <% @missing_required_fields.each do |field_name, section| %>
                      <li class="flex items-start text-sm">
                        <i class="material-icons text-gray-400 text-xs mt-0.5 mr-2">radio_button_unchecked</i>
                        <div>
                          <span class="font-medium text-gray-700"><%= field_name %></span>
                          <span class="text-gray-500 text-xs block"><%= section %></span>
                        </div>
                      </li>
                    <% end %>
                  </ul>
                </div>

                <!-- CTA Button -->
                <%= link_to @content.edit_path,
                    class: "inline-flex items-center px-6 py-3 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors shadow-sm" do %>
                  <i class="material-icons text-sm mr-2">edit</i>
                  Edit <%= @content.name || @content.page_type %>
                <% end %>

                <!-- Helper Text -->
                <p class="text-xs text-gray-500 mt-4">
                  Once you've added these details, you can return here to generate images
                </p>
              </div>
            </div>
          <% elsif @can_request_another && @relevant_fields.any? %>
            <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-4 sm:p-5 lg:p-6">
              <h3 class="text-base sm:text-lg font-semibold text-gray-900 mb-3 sm:mb-4 flex items-center">
                <i class="material-icons text-purple-500 mr-2 text-lg sm:text-base">palette</i>
                Choose a Style
              </h3>
              
              <!-- Main Styles -->
              <div class="grid grid-cols-2 gap-2 sm:gap-3 mb-3 sm:mb-4">
                <% BasilService.enabled_styles_for(@content.page_type).each do |style| %>
                  <button type="button"
                          onclick="submitBasilForm('<%= style %>')"
                          class="group relative bg-white border-2 border-gray-200 rounded-lg p-2 sm:p-3 lg:p-4 hover:border-purple-500 hover:shadow-md transition-all duration-200 text-left">
                    <div class="flex flex-col items-center text-center">
                      <div class="w-8 h-8 sm:w-10 sm:h-10 lg:w-12 lg:h-12 bg-purple-100 rounded-lg flex items-center justify-center mb-1 sm:mb-2 group-hover:bg-purple-200 transition-colors">
                        <i class="material-icons text-purple-600 text-sm sm:text-base">
                          <%= case style
                              when 'photograph' then 'photo_camera'
                              when 'watercolor_painting' then 'brush'
                              when 'pencil_sketch' then 'edit'
                              when 'smiling' then 'sentiment_satisfied'
                              when 'villain' then 'sentiment_very_dissatisfied'
                              when 'horror' then 'nights_stay'
                              when 'painting' then 'palette'
                              when 'sketch' then 'draw'
                              when 'interior' then 'home'
                              when 'exterior' then 'domain'
                              when 'aerial_photograph' then 'flight'
                              when 'fantasy' then 'auto_awesome'
                              when 'anime' then 'star'
                              when 'product_photography' then 'inventory_2'
                              when 'macro_photography' then 'zoom_in'
                              when 'cutaway_render' then 'layers'
                              when 'action_shot' then 'sports'
                              when 'amateur_photograph' then 'photo'
                              when 'celestial_body' then 'brightness_3'
                              when 'abstract' then 'category'
                              when 'geometric' then 'square'
                              when 'symbolic' then 'psychology'
                              else 'auto_awesome'
                              end %>
                        </i>
                      </div>
                      <span class="text-xs sm:text-sm font-medium text-gray-900 group-hover:text-purple-700">
                        <%= style.humanize %>
                      </span>
                    </div>
                  </button>
                <% end %>
              </div>
              
              <!-- Experimental Styles -->
              <% if BasilService.experimental_styles_for(@content.page_type).any? %>
                <div class="border-t pt-3 sm:pt-4">
                  <h4 class="text-xs sm:text-sm font-medium text-gray-700 mb-2 sm:mb-3 flex items-center">
                    <i class="material-icons text-amber-500 text-sm mr-1">science</i>
                    Experimental Styles
                  </h4>
                  <div class="grid grid-cols-2 gap-2 sm:gap-3">
                    <% BasilService.experimental_styles_for(@content.page_type).each do |style| %>
                      <button type="button"
                              onclick="submitBasilForm('<%= style %>')"
                              class="group relative bg-amber-50 border border-amber-200 rounded-lg p-2 sm:p-3 hover:border-amber-400 hover:bg-amber-100 transition-all duration-200 text-left">
                        <div class="flex items-center">
                          <i class="material-icons text-amber-600 text-xs sm:text-sm mr-1 sm:mr-2">science</i>
                          <span class="text-xs font-medium text-gray-700 truncate">
                            <%= style.humanize %>
                          </span>
                        </div>
                      </button>
                    <% end %>
                  </div>
                </div>
              <% end %>
              
              <p class="text-xs text-gray-500 mt-3 sm:mt-4 text-center">
                Click any style to generate an image
              </p>
            </div>
          <% elsif !@can_request_another && @in_progress_commissions.any? %>
            <!-- Queue Full Notice -->
            <div class="bg-blue-50 border border-blue-200 rounded-xl p-4 sm:p-5 lg:p-6">
              <div class="flex items-start">
                <div class="flex-shrink-0">
                  <i class="material-icons text-blue-500 text-xl sm:text-2xl">hourglass_empty</i>
                </div>
                <div class="ml-2 sm:ml-3">
                  <h3 class="text-sm font-semibold text-blue-900">Generation in Progress</h3>
                  <p class="mt-1 text-xs sm:text-sm text-blue-700">
                    Basil is working on <%= pluralize @in_progress_commissions.count, 'image' %>. 
                    New requests will be available once these complete.
                  </p>
                </div>
              </div>
            </div>
          <% end %>
        </div>
        
        <!-- Right Column: Generated Images -->
        <div class="lg:col-span-1 xl:col-span-2">
          <div class="space-y-4">
            <% if @commissions.any? %>
              <h3 class="text-base sm:text-lg font-semibold text-gray-900 flex items-center">
                <i class="material-icons text-purple-500 mr-2 text-lg sm:text-base">collections</i>
                Generated Images
              </h3>
            <% end %>
            
            <!-- Grid layout for larger screens -->
            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-4">
              <% @commissions.each do |commission| %>
                <% if commission.complete? %>
                  <!-- Completed Image Card -->
                  <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden group">
                    <div class="relative">
                      <%= link_to commission.image, target: '_blank', class: 'block' do %>
                        <%= image_tag commission.image, class: 'w-full h-auto' %>
                        <div class="absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-opacity flex items-center justify-center">
                          <i class="material-icons text-white opacity-0 group-hover:opacity-100 transition-opacity text-2xl sm:text-3xl">zoom_in</i>
                        </div>
                      <% end %>
                    </div>
                    
                    <div class="p-3 sm:p-4">
                      <div class="flex items-start justify-between mb-2 sm:mb-3">
                        <div class="min-w-0 flex-1">
                          <p class="text-sm font-medium text-gray-900 truncate"><%= @content.name %></p>
                          <p class="text-xs text-gray-500">
                            <%= commission.style.try(:humanize) %> • 
                            <%= time_ago_in_words commission.completed_at %> ago
                          </p>
                        </div>
                      </div>
                      
                      <!-- Feedback Section -->
                      <%= form_for commission.basil_feedbacks.find_or_initialize_by(user: current_user), 
                          url: basil_feedback_path(commission.job_id), 
                          method: :POST, 
                          remote: true,
                          html: { class: 'feedback-form', data: { commission_id: commission.id } } do |f| %>
                        <div class="flex items-center justify-center space-x-1 mb-2 sm:mb-3">
                          <% [
                            [-2, 'sentiment_very_dissatisfied', 'text-red-500'],
                            [-1, 'sentiment_dissatisfied', 'text-orange-500'],
                            [1, 'sentiment_satisfied', 'text-green-500'],
                            [2, 'sentiment_very_satisfied', 'text-green-600'],
                            [3, 'favorite', 'text-red-500']
                          ].each do |score, icon, color| %>
                            <label class="cursor-pointer">
                              <%= f.radio_button :score_adjustment, score, 
                                  class: 'hidden peer feedback-radio',
                                  onchange: "this.form.requestSubmit()" %>
                              <i class="material-icons text-xl sm:text-2xl text-gray-300 hover:text-gray-400 peer-checked:<%= color %> transition-colors">
                                <%= icon %>
                              </i>
                            </label>
                          <% end %>
                        </div>
                      <% end %>
                      
                      <!-- Actions -->
                      <div class="flex items-center justify-between pt-2 sm:pt-3 border-t">
                        <% if commission.saved_at? %>
                          <span class="inline-flex items-center text-xs sm:text-sm text-green-600">
                            <i class="material-icons text-sm mr-1">check_circle</i>
                            Saved
                          </span>
                        <% else %>
                          <button type="button" 
                                  class="save-btn inline-flex items-center text-xs sm:text-sm font-medium text-purple-600 hover:text-purple-700"
                                  data-endpoint="<%= basil_save_path(commission) %>">
                            <i class="material-icons text-sm mr-1">save</i>
                            <span class="hidden sm:inline">Save to page</span>
                            <span class="sm:hidden">Save</span>
                          </button>
                        <% end %>
                        
                        <button type="button"
                                class="delete-btn inline-flex items-center text-xs sm:text-sm font-medium text-red-600 hover:text-red-700"
                                data-endpoint="<%= basil_delete_path(commission) %>">
                          <i class="material-icons text-sm mr-1">delete</i>
                          Delete
                        </button>
                      </div>
                    </div>
                  </div>
                <% else %>
                  <!-- Loading Card -->
                  <div class="bg-gradient-to-br from-purple-50 to-blue-50 rounded-xl border border-purple-200 p-4 sm:p-5 lg:p-6">
                    <div class="flex items-center">
                      <div class="relative flex-shrink-0">
                        <div class="w-10 h-10 sm:w-12 sm:h-12 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin"></div>
                      </div>
                      <div class="ml-3 sm:ml-4 flex-1 min-w-0">
                        <p class="text-sm font-semibold text-gray-900">Generating...</p>
                        <p class="text-xs text-gray-600 truncate">
                          <%= commission.style.try(:humanize) || 'Style' %> • 
                          Started <%= time_ago_in_words commission.created_at %> ago
                        </p>
                        <p class="text-xs text-purple-600 mt-1">
                          Please refresh to see updates
                        </p>
                      </div>
                    </div>
                  </div>
                <% end %>
              <% end %>
            </div>
            
            <% if @commissions.count == 10 %>
              <div class="bg-gray-50 rounded-lg p-3 sm:p-4 text-center">
                <p class="text-xs sm:text-sm text-gray-600">
                  Showing last 10 images. 
                  <%= link_to 'View all in feedback center', basil_rating_queue_path, class: 'text-purple-600 hover:text-purple-700 font-medium' %>
                </p>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<script>
// Submit form with selected style
function submitBasilForm(style) {
  document.getElementById('basil_commission_style').value = style;
  document.getElementById('basil-commission-form').submit();
}

document.addEventListener('DOMContentLoaded', function() {
  // Toggle importance sliders
  const customizeBtn = document.getElementById('customize-importance-btn');
  const sliders = document.querySelectorAll('.importance-slider');
  const helpText = document.getElementById('importance-help');
  
  if (customizeBtn) {
    customizeBtn.addEventListener('click', function() {
      sliders.forEach(slider => slider.classList.toggle('hidden'));
      helpText.classList.toggle('hidden');
      
      const isHidden = helpText.classList.contains('hidden');
      const btnText = customizeBtn.querySelector('span');
      if (btnText) {
        btnText.textContent = isHidden ? 'Customize importance' : 'Hide importance';
      }
    });
  }
  
  // Save commission
  document.querySelectorAll('.save-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      const endpoint = this.dataset.endpoint + '.json';
      const button = this;
      
      button.innerHTML = '<i class="material-icons text-sm mr-1">check</i>Saved!';
      button.classList.add('text-green-600');
      button.disabled = true;
      
      fetch(endpoint, {
        method: 'POST',
        headers: {
          'X-CSRF-Token': document.querySelector('[name="csrf-token"]').content,
          'Content-Type': 'application/json'
        }
      }).then(response => response.json())
        .then(data => {
          // Show success message
          showNotification("Image saved to <%= @content.name.gsub('"', '\"') %>'s page");
        });
    });
  });
  
  // Delete commission
  document.querySelectorAll('.delete-btn').forEach(btn => {
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      
      if (!confirm('Are you sure you want to delete this image?')) return;
      
      const endpoint = this.dataset.endpoint + '.json';
      const card = this.closest('.bg-white');
      
      fetch(endpoint, {
        method: 'DELETE',
        headers: {
          'X-CSRF-Token': document.querySelector('[name="csrf-token"]').content
        }
      }).then(response => response.json())
        .then(data => {
          card.style.opacity = '0';
          card.style.transform = 'scale(0.95)';
          setTimeout(() => card.remove(), 300);
          showNotification('Image deleted successfully');
        });
    });
  });
  
  // Show notification helper
  function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'fixed bottom-4 right-4 bg-gray-900 text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-y-20 text-xs sm:text-sm';
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.transform = 'translateY(0)';
    }, 100);
    
    setTimeout(() => {
      notification.style.opacity = '0';
      setTimeout(() => notification.remove(), 300);
    }, 3000);
  }
});
</script>

<style>
/* Range slider styling for importance controls */
.basil-importance-range {
  -webkit-appearance: none;
  appearance: none;
  height: 6px;
  background: #e5e7eb;
  border-radius: 3px;
  outline: none;
  opacity: 0.9;
  transition: opacity 0.2s;
}

.basil-importance-range:hover {
  opacity: 1;
}

/* Webkit browsers (Chrome, Safari, Edge) */
.basil-importance-range::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 16px;
  height: 16px;
  background: #9333ea;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.basil-importance-range::-webkit-slider-thumb:hover {
  background: #7c3aed;
  transform: scale(1.1);
  box-shadow: 0 2px 6px rgba(147, 51, 234, 0.4);
}

/* Firefox */
.basil-importance-range::-moz-range-thumb {
  width: 16px;
  height: 16px;
  background: #9333ea;
  border: none;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.basil-importance-range::-moz-range-thumb:hover {
  background: #7c3aed;
  transform: scale(1.1);
  box-shadow: 0 2px 6px rgba(147, 51, 234, 0.4);
}

/* Loading spinner animation */
@keyframes spin {
  to { transform: rotate(360deg); }
}
.animate-spin {
  animation: spin 1s linear infinite;
}

/* Responsive adjustments for small screens */
@media (max-width: 640px) {
  .basil-importance-range {
    height: 8px;
  }
  
  .basil-importance-range::-webkit-slider-thumb {
    width: 20px;
    height: 20px;
  }
  
  .basil-importance-range::-moz-range-thumb {
    width: 20px;
    height: 20px;
  }
}
</style>