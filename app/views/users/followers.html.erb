<script type="application/ld+json">
  <%
    set_meta_tags title: @user.name,
    description: "#{@user.name}’s followers",
    image_src: @user.image_url(size: 120)

    content_jsonld = {
      '@id': user_url(id: @user.id),
      '@type': 'https://schema.org/Person',
      'https://schema.org/name': @user.name,
      'https://schema.org/description': "#{@user.name}’s followers on Notebook.ai",
      'https://schema.org/image': @user.image_url(size: 120)
    }
  %>
  <%= content_jsonld.to_json.html_safe %> %>
</script>

<%= content_for :full_width_page_header do %>
  <div class="relative w-full bg-gray-100 dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700">
    <div class="h-48 w-full relative group overflow-hidden">
      <% if @user.favorite_page_type? %>
        <div class="<%= @user.favorite_page_type_color %> w-full h-full bg-opacity-90 dark:bg-opacity-80" style="background-color: <%= @user.favorite_page_type_color %>"></div>
      <% else %>
        <%= image_tag "card-headers/users.png", class: "w-full h-full object-cover", alt: "User profile header" %>
      <% end %>
      
      <div class="absolute bottom-0 left-0 p-4 md:p-6 w-full flex items-end">
        <div class="flex items-center gap-4">
          <div class="relative">
            <%= image_tag @user.image_url.html_safe, class: "w-20 h-20 md:w-24 md:h-24 rounded-full border-4 border-white dark:border-gray-900 bg-white dark:bg-gray-900 shadow-lg object-cover", data: { caption: "#{@user.display_name}'s avatar" } %>
          </div>
          
          <div class="mb-2">
            <h1 class="text-2xl md:text-3xl font-bold text-white drop-shadow-md">
              <%= link_to @user.name, @user, class: "text-white hover:text-gray-200 transition-colors" %>
            </h1>
            <div class="text-white text-opacity-90 drop-shadow-sm font-medium">
              <%= render partial: 'thredded/users/badge', locals: { user: @user } %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>

<div class="container mx-auto px-4 py-8">
  <div class="mb-6">
    <h2 class="text-2xl font-bold text-gray-800 dark:text-gray-100 flex items-center gap-2">
      <i class="material-icons text-gray-400">group</i>
      <span>Followed by</span>
      <span class="text-gray-400 text-lg font-normal ml-2">
        <%= pluralize @user.followed_by_users.count, 'worldbuilder' %>
      </span>
    </h2>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    <%= render partial: 'users/user_card', collection: @followers, as: :user %>
  </div>

  <% if @followers.respond_to?(:total_pages) && @followers.total_pages > 1 %>
    <div class="mt-8 flex justify-center">
      <%= will_paginate @followers %>
    </div>
  <% end %>
</div>