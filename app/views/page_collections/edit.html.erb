<!-- Main Container -->
<div class="min-h-screen bg-gray-50 dark:bg-gray-900">
  
  <!-- Hero Section -->
  <div class="bg-gradient-to-b from-brown-800 to-notebook-blue text-white">
    <div class="max-w-7xl mx-auto px-6 py-8">
      
      <!-- Breadcrumb -->
      <nav class="mb-6">
        <div class="flex items-center space-x-2 text-white/80 text-sm">
          <%= link_to "Collections", page_collections_path, class: "hover:text-white transition-colors duration-200" %>
          <i class="material-icons text-xs">chevron_right</i>
          <%= link_to @page_collection.title, @page_collection, class: "hover:text-white transition-colors duration-200" %>
          <i class="material-icons text-xs">chevron_right</i>
          <span class="text-white font-medium">Edit Collection</span>
        </div>
      </nav>
      
      <!-- Header Content -->
      <div class="flex items-center justify-between">
        <div class="flex items-center space-x-4">
          <div class="w-16 h-16 bg-white/20 rounded-full backdrop-blur-sm flex items-center justify-center">
            <i class="material-icons text-white text-2xl">edit</i>
          </div>
          <div>
            <h1 class="text-3xl font-bold text-white">Edit Collection</h1>
            <p class="text-white/90">Update your collection settings and content</p>
          </div>
        </div>
        
        <!-- Collection Info -->
        <div class="hidden lg:flex items-center space-x-4 bg-white/10 backdrop-blur-sm rounded-lg px-4 py-2">
          <div class="text-right">
            <div class="text-white font-semibold"><%= @page_collection.title %></div>
            <div class="text-white/70 text-sm">
              <%= pluralize @page_collection.accepted_submissions.count, 'article' %> published
            </div>
          </div>
          <div class="w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center">
            <i class="material-icons text-white">collections</i>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Main Content -->
  <div class="max-w-4xl mx-auto px-6 py-8 pb-32">
    <div>
        
        <%= form_with(model: @page_collection, local: true, id: 'collection-form', class: 'space-y-10') do |f| %>
          
          <!-- Basic Information -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden form-section dark:bg-gray-800 dark:border-gray-700">
            <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-amber-50 to-orange-50 dark:border-gray-700 dark:from-gray-700 dark:to-gray-700">
              <div class="flex items-center">
                <div class="p-2 bg-amber-100 rounded-lg mr-3 dark:bg-amber-900">
                  <i class="material-icons text-amber-600 dark:text-amber-400">edit</i>
                </div>
                <div>
                  <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Basic Information</h2>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Update your collection's name and description</p>
                </div>
              </div>
            </div>
            
            <div class="p-6 space-y-6">
              <!-- Title and Subtitle Row -->
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Title -->
                <div>
                  <%= f.label :title, class: 'block text-sm font-medium text-gray-900 mb-2 dark:text-gray-200' do %>
                    <span class="flex items-center">
                      <i class="material-icons text-gray-400 text-sm mr-2">title</i>
                      Collection Title *
                    </span>
                  <% end %>
                  <%= f.text_field :title, 
                      placeholder: 'My Awesome Collection', 
                      class: 'block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors duration-200 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400',
                      required: true %>
                  <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Choose a descriptive name that captures what your collection is about</p>
                </div>

                <!-- Subtitle -->  
                <div>
                  <%= f.label :subtitle, class: 'block text-sm font-medium text-gray-900 mb-2 dark:text-gray-200' do %>
                    <span class="flex items-center">
                      <i class="material-icons text-gray-400 text-sm mr-2">subtitles</i>
                      Subtitle
                    </span>
                  <% end %>
                  <%= f.text_field :subtitle, 
                      placeholder: 'A curated selection of my favorite pages', 
                      class: 'block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors duration-200 text-sm dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400' %>
                  <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">Optional tagline to give more context about your collection</p>
                </div>
              </div>

              <!-- Description -->
              <div>
                <%= f.label :description, class: 'block text-sm font-medium text-gray-900 mb-2 dark:text-gray-200' do %>
                  <span class="flex items-center">
                    <i class="material-icons text-gray-400 text-sm mr-2">description</i>
                    Description
                  </span>
                <% end %>
                <%= f.text_area :description, 
                    placeholder: "Write as little or as much as you'd like! Describe what makes this collection special...", 
                    rows: 4,
                    class: 'block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors duration-200 text-sm resize-none dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400' %>
                <p class="mt-1 text-xs text-gray-500">
                  Brief description for your collection. <code class="bg-gray-100 px-1 rounded text-xs dark:bg-gray-700 dark:text-gray-300">&lt;strong&gt;</code> and <code class="bg-gray-100 px-1 rounded text-xs dark:bg-gray-700 dark:text-gray-300">&lt;em&gt;</code> tags are supported.
                </p>
              </div>
            </div>
          </div>

          <!-- Visual Design -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden form-section dark:bg-gray-800 dark:border-gray-700">
            <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 dark:border-gray-700 dark:from-gray-700 dark:to-gray-700">
              <div class="flex items-center">
                <div class="p-2 bg-blue-100 rounded-lg mr-3 dark:bg-blue-900">
                  <i class="material-icons text-blue-600 dark:text-blue-400">palette</i>
                </div>
                <div>
                  <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Visual Design</h2>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Customize how your collection looks</p>
                </div>
              </div>
            </div>
            
            <div class="p-6 space-y-6">
              <!-- Header Image -->
              <div>
                <label class="block text-sm font-medium text-gray-900 mb-4 dark:text-gray-200">
                  <span class="flex items-center">
                    <i class="material-icons text-gray-400 text-sm mr-2">image</i>
                    Header Image
                  </span>
                </label>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                  <!-- Current Image Preview -->
                  <% if @page_collection.persisted? && @page_collection.header_image.attached? %>
                    <div class="md:col-span-1">
                      <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700">
                        <%= link_to url_for(@page_collection.header_image), target: '_blank', class: "block w-full h-full" do %>
                          <%= image_tag @page_collection.first_public_image, class: 'w-full h-full object-cover hover:scale-105 transition-transform duration-200' %>
                        <% end %>
                      </div>
                      <p class="text-xs text-gray-500 mt-2 text-center dark:text-gray-400">Current image</p>
                    </div>
                  <% end %>
                  
                  <!-- Upload Area -->
                  <div class="<%= @page_collection.persisted? && @page_collection.header_image.attached? ? 'md:col-span-2' : 'md:col-span-3' %>">
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors duration-200 dark:border-gray-600 dark:hover:border-gray-500">
                      <div class="space-y-4">
                        <div class="mx-auto w-12 h-12 bg-gray-100 rounded-lg flex items-center justify-center dark:bg-gray-700">
                          <i class="material-icons text-gray-400 text-2xl">cloud_upload</i>
                        </div>
                        
                        <div>
                          <%= f.label :header_image, class: 'cursor-pointer' do %>
                            <span class="inline-flex items-center px-4 py-2 bg-white border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500 transition-colors duration-200 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-600">
                              <i class="material-icons text-sm mr-2">add_photo_alternate</i>
                              <%= @page_collection.header_image.attached? ? 'Change Image' : 'Choose Image' %>
                            </span>
                            <%= f.file_field :header_image, 
                                class: 'sr-only', 
                                accept: 'image/*' %>
                          <% end %>
                          <p class="text-sm text-gray-500 mt-2 dark:text-gray-400">or drag and drop</p>
                        </div>
                        
                        <div class="text-xs text-gray-500 dark:text-gray-400">
                          <p>PNG, JPG, GIF up to 1MB</p>
                          <p>Recommended: 1200Ã—400px for best results</p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Content Types -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden form-section dark:bg-gray-800 dark:border-gray-700">
            <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50 dark:border-gray-700 dark:from-gray-700 dark:to-gray-700">
              <div class="flex items-center">
                <div class="p-2 bg-purple-100 rounded-lg mr-3 dark:bg-purple-900">
                  <i class="material-icons text-purple-600 dark:text-purple-400">category</i>
                </div>
                <div>
                  <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Content Types</h2>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Choose what types of content can be added</p>
                </div>
              </div>
            </div>
            
            <div class="p-6">
              <!-- Quick Selection -->
              <div class="flex items-center space-x-4 mb-6 p-3 bg-gray-50 rounded-lg dark:bg-gray-700">
                <span class="text-sm font-medium text-gray-700 dark:text-gray-300">Quick select:</span>
                <button type="button" id="select-common-types" class="text-sm font-medium text-green-600 hover:text-green-700 transition-colors duration-200 dark:text-green-400 dark:hover:text-green-300">
                  Common Types
                </button>
                <span class="text-gray-300 dark:text-gray-600">|</span>
                <button type="button" id="select-all-types" class="text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors duration-200 dark:text-blue-400 dark:hover:text-blue-300">
                  All Types
                </button>
                <span class="text-gray-300 dark:text-gray-600">|</span>
                <button type="button" id="select-none-types" class="text-sm font-medium text-gray-600 hover:text-gray-700 transition-colors duration-200 dark:text-gray-400 dark:hover:text-gray-300">
                  None
                </button>
              </div>
              
              <!-- Content Type Grid -->
              <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
                <% Rails.application.config.content_types[:all].each do |content_type| %>
                  <div class="content-type-option">
                    <%= f.label "page_types[#{content_type.name}]", class: 'flex items-center p-3 border border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 group dark:border-gray-700 dark:hover:bg-gray-700 dark:hover:border-gray-600' do %>
                      <%= f.check_box "page_types[#{content_type.name}]", 
                          checked: @page_collection.page_types.include?(content_type.name), 
                          class: 'sr-only content-type-checkbox',
                          data: { 
                            type: content_type.name.downcase,
                            common: %w[character location item universe].include?(content_type.name.downcase)
                          } %>
                      
                      <!-- Custom Checkbox -->
                      <div class="checkbox-custom w-5 h-5 border-2 border-gray-300 rounded flex items-center justify-center mr-3 flex-shrink-0 group-hover:border-gray-400 transition-colors duration-200 dark:border-gray-600 dark:group-hover:border-gray-500">
                        <i class="material-icons text-white text-sm opacity-0 check-icon">check</i>
                      </div>
                      
                      <!-- Content Type Info -->
                      <div class="flex items-center flex-1 min-w-0">
                        <div class="p-2 <%= content_type.color %> bg-opacity-10 rounded-lg mr-3 flex-shrink-0">
                          <i class="material-icons <%= content_type.text_color %> text-sm">
                            <%= content_type.icon %>
                          </i>
                        </div>
                        <span class="text-sm font-medium text-gray-900 truncate dark:text-gray-200">
                          <%= content_type.name.pluralize %>
                        </span>
                      </div>
                    <% end %>
                  </div>
                <% end %>
              </div>
            </div>
          </div>

          <!-- Privacy & Settings -->
          <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden form-section dark:bg-gray-800 dark:border-gray-700">
            <div class="px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-green-50 to-emerald-50 dark:border-gray-700 dark:from-gray-700 dark:to-gray-700">
              <div class="flex items-center">
                <div class="p-2 bg-green-100 rounded-lg mr-3 dark:bg-green-900">
                  <i class="material-icons text-green-600 dark:text-green-400">settings</i>
                </div>
                <div>
                  <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Privacy & Settings</h2>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Control who can see and contribute to your collection</p>
                </div>
              </div>
            </div>
            
            <div class="p-6 space-y-8">
              <!-- Privacy Settings -->
              <fieldset>
                <legend class="block text-sm font-medium text-gray-900 mb-4 dark:text-gray-200">
                  <span class="flex items-center">
                    <i class="material-icons text-gray-400 text-sm mr-2">visibility</i>
                    Visibility *
                  </span>
                </legend>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                  <!-- Public Option -->
                  <label class="js-privacy-option relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none transition-all duration-200" data-type="public">
                    <%= f.radio_button :privacy, 'public', class: 'sr-only', checked: @page_collection.privacy == 'public' || @page_collection.privacy.blank? %>
                    <div class="flex flex-1">
                      <div class="flex flex-col">
                        <span class="block text-sm font-medium mb-1 flex items-center js-privacy-text transition-colors">
                          <i class="material-icons text-sm mr-2 text-gray-400 js-privacy-icon transition-colors">public</i>
                          Public
                        </span>
                        <span class="block text-sm text-gray-500 dark:text-gray-400">Anyone can discover and view this collection</span>
                      </div>
                    </div>
                    <!-- Active Ring -->
                    <div class="js-active-ring pointer-events-none absolute -inset-px rounded-lg border-2 border-transparent transition-all duration-200" aria-hidden="true"></div>
                    <!-- Checkmark -->
                    <div class="js-checkmark absolute top-4 right-4 opacity-0 transition-opacity duration-200">
                      <i class="material-icons">check_circle</i>
                    </div>
                  </label>

                  <!-- Private Option -->
                  <label class="js-privacy-option relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none transition-all duration-200" data-type="private">
                    <%= f.radio_button :privacy, 'private', class: 'sr-only' %>
                    <div class="flex flex-1">
                      <div class="flex flex-col">
                        <span class="block text-sm font-medium mb-1 flex items-center js-privacy-text transition-colors">
                          <i class="material-icons text-sm mr-2 text-gray-400 js-privacy-icon transition-colors">lock</i>
                          Private
                        </span>
                        <span class="block text-sm text-gray-500 dark:text-gray-400">Only you can see this collection</span>
                      </div>
                    </div>
                    <!-- Active Ring -->
                    <div class="js-active-ring pointer-events-none absolute -inset-px rounded-lg border-2 border-transparent transition-all duration-200" aria-hidden="true"></div>
                    <!-- Checkmark -->
                    <div class="js-checkmark absolute top-4 right-4 opacity-0 transition-opacity duration-200">
                      <i class="material-icons">check_circle</i>
                    </div>
                  </label>
                </div>
              </fieldset>

              <!-- Submission Settings -->
              <fieldset>
                <legend class="block text-sm font-medium text-gray-900 mb-4 dark:text-gray-200">
                  <span class="flex items-center">
                    <i class="material-icons text-gray-400 text-sm mr-2">inbox</i>
                    Community Contributions
                  </span>
                </legend>
                
                <div class="space-y-4">
                  <div class="border border-gray-200 rounded-lg p-4 dark:border-gray-700">
                    <%= f.label :allow_submissions, class: 'flex items-start cursor-pointer' do %>
                      <%= f.check_box :allow_submissions, class: 'sr-only submission-toggle', id: 'allow_submissions_checkbox' %>
                      <div class="visual-toggle-switch mr-3 mt-0.5"></div>
                      <div class="flex-1">
                        <div class="font-medium text-gray-900 mb-1 dark:text-gray-200">Allow submissions from other users</div>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Let the community suggest content for your collection</p>
                      </div>
                    <% end %>
                  </div>
                  
                  <!-- Auto-accept nested setting -->
                  <div id="auto-accept-setting" class="border border-gray-200 rounded-lg p-4 ml-6 bg-gray-50 dark:bg-gray-700 dark:border-gray-600 <%= 'hidden' unless @page_collection.allow_submissions? %>">
                    <%= f.label :auto_accept, class: 'flex items-start cursor-pointer' do %>
                      <%= f.check_box :auto_accept, class: 'sr-only auto-accept-toggle' %>
                      <div class="visual-toggle-switch mr-3 mt-0.5"></div>
                      <div class="flex-1">
                        <div class="font-medium text-gray-900 mb-1 dark:text-gray-200">Auto-accept submissions</div>
                        <p class="text-sm text-gray-600 dark:text-gray-400">Automatically publish new submissions without manual review</p>
                        <div class="mt-2 p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-800 dark:bg-gray-700 dark:border-amber-800 dark:text-amber-400">
                          <i class="material-icons text-xs mr-1">info</i>
                          <strong>Note:</strong> Only enable this if you trust your community. All submissions will be published immediately.
                        </div>
                      </div>
                    <% end %>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>

          <!-- Danger Zone -->
          <div class="bg-white rounded-xl shadow-sm border border-red-200 overflow-hidden form-section dark:bg-gray-800 dark:border-red-900">
            <div class="px-6 py-4 border-b border-red-200 bg-gradient-to-r from-red-50 to-pink-50 dark:border-red-900 dark:from-gray-700 dark:to-gray-700">
              <div class="flex items-center">
                <div class="p-2 bg-red-100 rounded-lg mr-3 dark:bg-red-900">
                  <i class="material-icons text-red-600 dark:text-red-400">warning</i>
                </div>
                <div>
                  <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Danger Zone</h2>
                  <p class="text-sm text-gray-600 dark:text-gray-400">Irreversible actions for this collection</p>
                </div>
              </div>
            </div>
            
            <div class="p-6">
              <div class="flex items-center justify-between p-4 border border-red-200 rounded-lg bg-red-50 dark:bg-gray-700 dark:border-red-900">
                <div>
                  <h3 class="text-sm font-medium text-red-900 dark:text-red-200">Delete Collection</h3>
                  <p class="text-sm text-red-700 dark:text-red-300">Permanently delete this collection and all its content. This cannot be undone.</p>
                </div>
                <%= link_to @page_collection,
                    method: :DELETE,
                    class: 'inline-flex items-center px-4 py-2 border border-red-300 rounded-lg text-sm font-medium text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors duration-200 dark:bg-red-900 dark:border-red-800 dark:text-red-200 dark:hover:bg-red-800',
                    data: { confirm: "Are you sure? This will PERMANENTLY delete this entire collection! It cannot be undone!" } do %>
                  <i class="material-icons text-sm mr-2">delete_forever</i>
                  Delete Collection
                <% end %>
              </div>
            </div>
          </div>

          <!-- Form Actions -->
          <div class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg z-10 dark:bg-gray-800 dark:border-gray-700 transform transition-transform duration-300">
            <div class="max-w-4xl mx-auto flex items-center justify-between px-6">
              <%= link_to @page_collection, class: "px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors duration-200 dark:border-gray-600 dark:text-gray-200 dark:hover:bg-gray-700" do %>
                Cancel
              <% end %>
              
              <div class="flex items-center space-x-3">

                <%= f.submit 'Save Changes', class: "px-6 py-2 bg-gradient-to-r from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 inline-flex items-center" %>
              </div>
            </div>
          </div>
        <% end %>
    </div>
  </div>
</div>

<!-- Custom Styles -->
<style>
/* Custom Checkbox Styles */
.content-type-option input[type="checkbox"]:checked + label .checkbox-custom {
  @apply bg-purple-500 border-purple-500;
}

.content-type-option input[type="checkbox"]:checked + label .check-icon {
  @apply opacity-100;
}

/* Toggle Switch Styles */
.visual-toggle-switch {
  width: 48px;
  height: 24px;
  background-color: #e5e7eb;
  @apply dark:bg-gray-700;
  border-radius: 12px;
  position: relative;
  transition: background-color 0.2s;
  cursor: pointer;
}

.visual-toggle-switch::after {
  content: '';
  position: absolute;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background-color: white;
  @apply dark:bg-gray-200;
  top: 2px;
  left: 2px;
  transition: transform 0.2s;
}

.submission-toggle:checked + .visual-toggle-switch,
.auto-accept-toggle:checked + .visual-toggle-switch {
  background-color: #10b981;
}

.submission-toggle:checked + .visual-toggle-switch::after,
.auto-accept-toggle:checked + .visual-toggle-switch::after {
  transform: translateX(24px);
}

/* Form section spacing improvements */
.form-section {
  transition: all 0.2s ease;
}

.form-section:hover {
  transform: translateY(-2px);
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
  @apply dark:shadow-none dark:bg-gray-750;
}
</style>

<!-- JavaScript for Quick Selection -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Quick content type selection
  document.getElementById('select-common-types')?.addEventListener('click', function() {
    document.querySelectorAll('.content-type-checkbox').forEach(checkbox => {
      const isCommon = checkbox.dataset.common === 'true';
      checkbox.checked = isCommon;
      updateCheckboxStyles(checkbox);
    });
  });
  
  document.getElementById('select-all-types')?.addEventListener('click', function() {
    document.querySelectorAll('.content-type-checkbox').forEach(checkbox => {
      checkbox.checked = true;
      updateCheckboxStyles(checkbox);
    });
  });
  
  document.getElementById('select-none-types')?.addEventListener('click', function() {
    document.querySelectorAll('.content-type-checkbox').forEach(checkbox => {
      checkbox.checked = false;
      updateCheckboxStyles(checkbox);
    });
  });
  
  // Initialize checkbox styles
  document.querySelectorAll('.content-type-checkbox').forEach(checkbox => {
    updateCheckboxStyles(checkbox);
    checkbox.addEventListener('change', function() {
      updateCheckboxStyles(this);
    });
  });
  
  function updateCheckboxStyles(checkbox) {
    const customCheckbox = checkbox.parentElement.querySelector('.checkbox-custom');
    const checkIcon = customCheckbox.querySelector('.check-icon');
    
    if (checkbox.checked) {
      customCheckbox.classList.add('bg-purple-500', 'border-purple-500');
      customCheckbox.classList.remove('border-gray-300');
      checkIcon.classList.add('opacity-100');
      checkIcon.classList.remove('opacity-0');
    } else {
      customCheckbox.classList.remove('bg-purple-500', 'border-purple-500');
      customCheckbox.classList.add('border-gray-300');
      checkIcon.classList.remove('opacity-100');
      checkIcon.classList.add('opacity-0');
    }
  }
  
  // Initialize toggle switch styles
  document.querySelectorAll('.submission-toggle, .auto-accept-toggle').forEach(toggle => {
    updateToggleStyles(toggle);
    toggle.addEventListener('change', function() {
      updateToggleStyles(this);
      
      // Show/hide auto-accept setting when submissions toggle changes
      if (this.classList.contains('submission-toggle')) {
        const autoAcceptSetting = document.getElementById('auto-accept-setting');
        if (this.checked) {
          autoAcceptSetting.classList.remove('hidden');
        } else {
          autoAcceptSetting.classList.add('hidden');
          // Also uncheck auto-accept when submissions are disabled
          const autoAcceptToggle = document.querySelector('.auto-accept-toggle');
          autoAcceptToggle.checked = false;
          updateToggleStyles(autoAcceptToggle);
        }
      }
    });
  });
  
  function updateToggleStyles(toggle) {
    // The CSS already handles the styling via :checked pseudo-selector
    // This function is kept for compatibility but no longer needs to do anything
    // since the CSS handles all the styling automatically
  }
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const privacyRadios = document.querySelectorAll('input[name="page_collection[privacy]"]');
  
  function updatePrivacyUI() {
    privacyRadios.forEach(radio => {
      const label = radio.closest('.js-privacy-option');
      if (!label) return;
      
      const type = label.dataset.type;
      const activeRing = label.querySelector('.js-active-ring');
      const checkmark = label.querySelector('.js-checkmark');
      const text = label.querySelector('.js-privacy-text');
      const icon = label.querySelector('.js-privacy-icon');
      const checkmarkIcon = checkmark.querySelector('i');
      
      // Reset base classes
      label.className = 'js-privacy-option relative flex cursor-pointer rounded-lg border p-4 shadow-sm focus:outline-none transition-all duration-200';
      activeRing.className = 'js-active-ring pointer-events-none absolute -inset-px rounded-lg border-2 border-transparent transition-all duration-200';
      checkmark.className = 'js-checkmark absolute top-4 right-4 opacity-0 transition-opacity duration-200';
      text.className = 'block text-sm font-medium mb-1 flex items-center js-privacy-text transition-colors';
      icon.className = 'material-icons text-sm mr-2 js-privacy-icon transition-colors';
      
      if (radio.checked) {
        // Selected State
        checkmark.classList.remove('opacity-0');
        checkmark.classList.add('opacity-100');
        
        if (type === 'public') {
          label.classList.add('bg-white', 'dark:bg-gray-800', 'hover:bg-gray-50', 'dark:hover:bg-gray-700/50');
          activeRing.classList.add('border-green-500', 'bg-green-50/10', 'dark:bg-green-900/10');
          text.classList.add('text-gray-900', 'dark:text-gray-200');
          icon.classList.add('text-green-600');
          checkmarkIcon.className = 'material-icons text-green-600';
        } else {
          label.classList.add('bg-white', 'dark:bg-gray-800', 'hover:bg-gray-50', 'dark:hover:bg-gray-700/50');
          activeRing.classList.add('border-gray-500', 'bg-gray-50/10', 'dark:bg-gray-700/30');
          text.classList.add('text-gray-900', 'dark:text-gray-200');
          icon.classList.add('text-gray-600', 'dark:text-gray-300');
          checkmarkIcon.className = 'material-icons text-gray-600 dark:text-gray-400';
        }
      } else {
        // Unselected State
        label.classList.add('bg-white', 'dark:bg-gray-800', 'border-gray-200', 'dark:border-gray-700', 'hover:bg-gray-50', 'dark:hover:bg-gray-700/50');
        text.classList.add('text-gray-900', 'dark:text-gray-200');
        icon.classList.add('text-gray-400');
      }
    });
  }

  privacyRadios.forEach(radio => {
    radio.addEventListener('change', updatePrivacyUI);
  });
  
  // Initialize
  updatePrivacyUI();
});
</script>

