<div class="lg:grid lg:grid-cols-12 lg:gap-x-5 max-w-7xl mx-auto">
  <aside class="py-6 px-2 sm:px-6 lg:py-0 lg:px-0 lg:col-span-3">
    <nav class="space-y-1">
      <!-- Current: "bg-gray-50 text-indigo-700 hover:text-indigo-700 hover:bg-white", Default: "text-gray-900 hover:text-gray-900 hover:bg-gray-50" -->
      <a href="#" class="bg-gray-50 <%= PageCollection.text_color %> hover:text-brown-700 hover:bg-white group rounded-md px-3 py-2 flex items-center text-sm font-medium" aria-current="page">
        <i class="material-icons float-left -ml-1 mr-3"><%= PageCollection.icon %></i>
        <span class="truncate">Look & feel</span>
      </a>

      <a href="#" class="text-gray-600 hover:text-gray-800 hover:bg-gray-50 group rounded-md px-3 py-2 flex items-center text-sm font-medium">
        <i class="material-icons float-left -ml-1 mr-3">inbox</i>
        <span class="truncate">Submissions</span>
      </a>

      <!--
      <a href="#" class="text-gray-600 hover:text-gray-800 hover:bg-gray-50 group rounded-md px-3 py-2 flex items-center text-sm font-medium">
        <i class="material-icons float-left -ml-1 mr-3">lock</i>
        <span class="truncate">Privacy</span>
      </a>
      -->

      <!--
      <a href="#" class="text-gray-900 hover:text-gray-900 hover:bg-gray-50 group rounded-md px-3 py-2 flex items-center text-sm font-medium">
        <svg class="text-gray-400 group-hover:text-gray-500 flex-shrink-0 -ml-1 mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
        </svg>
        <span class="truncate"> Plan &amp; Billing </span>
      </a>
      -->
      <!--
      <a href="#" class="text-gray-900 hover:text-gray-900 hover:bg-gray-50 group rounded-md px-3 py-2 flex items-center text-sm font-medium">
        <svg class="flex-shrink-0 -ml-1 mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
        </svg>
        <span class="truncate"> Collaborators </span>
      </a>

      <a href="#" class="text-gray-900 hover:text-gray-900 hover:bg-gray-50 group rounded-md px-3 py-2 flex items-center text-sm font-medium">
        <i class="material-icons float-left -ml-1 mr-3"><%= User.icon %></i>
        <span class="truncate"> Followers </span>
      </a>

      <a href="#" class="text-gray-900 hover:text-gray-900 hover:bg-gray-50 group rounded-md px-3 py-2 flex items-center text-sm font-medium">
        <svg class="flex-shrink-0 -ml-1 mr-3 h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14v6m-3-3h6M6 10h2a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2zm10 0h2a2 2 0 002-2V6a2 2 0 00-2-2h-2a2 2 0 00-2 2v2a2 2 0 002 2zM6 20h2a2 2 0 002-2v-2a2 2 0 00-2-2H6a2 2 0 00-2 2v2a2 2 0 002 2z" />
        </svg>
        <span class="truncate"> Integrations </span>
      </a>
      -->
    </nav>
  </aside>

  <%# todo: audit usage of form_with and local:true %>
  <%= form_with(model: page_collection, local: true, class: 'sm:px-6 lg:px-0 lg:col-span-9') do |f| %>
    <% if page_collection.errors.any? %>
      <div id="error_explanation">
        <h2 style="font-size: 1.5em"><%= pluralize(page_collection.errors.count, "error") %> prohibited this Collection from being saved:</h2>

        <ul class="browser-default">
          <% page_collection.errors.full_messages.each do |message| %>
            <li class="red-text"><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="shadow sm:rounded-md sm:overflow-hidden mb-8">
      <div class="bg-white py-6 px-4 space-y-6 sm:p-6">
        <div>
          <h3 class="text-lg leading-6 font-medium text-gray-900">Look & feel</h3>
          <p class="mt-1 text-sm text-gray-500">Control the look and feel of your collection.</p>
        </div>

        <div class="grid grid-cols-3 gap-6">
          <!--
          <div class="col-span-3 sm:col-span-2">
            <label for="company-website" class="block text-sm font-medium text-gray-700">
              URL
            </label>
            <div class="mt-1 rounded-md shadow-sm flex">
              <span class="bg-gray-50 border border-r-0 border-gray-300 rounded-l-md px-3 inline-flex items-center text-gray-500 sm:text-sm">
                notebook.ai/
              </span>
              <input type="text" name="username" id="username" autocomplete="username" class="focus:ring-indigo-500 focus:border-indigo-500 flex-grow block w-full min-w-0 rounded-none rounded-r-md sm:text-sm border-gray-300">
            </div>
          </div>
          -->

          <div class="col-span-3">
            <%= f.label :title, class: 'block text-sm font-medium text-gray-700' %>
            <%= f.text_field :title, placeholder: 'My Awesome Collection', class: 'mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-brown-500 focus:border-brown-500 sm:text-sm' %>
          </div>

          <div class="col-span-3">
            <%= f.label :subtitle, class: 'block text-sm font-medium text-gray-700' %>
            <%= f.text_field :subtitle, placeholder: 'My favorite pages', class: 'mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-brown-500 focus:border-brown-500 sm:text-sm' %>
          </div>

          <div class="col-span-3">
            <%= f.label :description, class: 'block text-sm font-medium text-gray-700' %>
            <div class="mt-1">
              <%= f.text_area :description, placeholder: "Write as little or as much as you'd like!", rows: 5, class: 'shadow-sm focus:ring-brown-500 focus:border-brown-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md' %>
            </div>
            <p class="mt-2 text-xs text-gray-500">Brief description for your collection. <code>&lt;strong&gt;</code> and <code>&lt;em&gt;</em></code> tags are supported.</p>
          </div>

          <div class="col-span-3 -mb-6">
            <label class="block text-sm font-medium text-gray-700">Header image</label>
          </div>
          <div class="col-span-1">
            <% if @page_collection.persisted? && @page_collection.header_image %>
              <%= link_to @page_collection.header_image, target: '_blank' do %>
                <%= image_tag @page_collection.first_public_image, class: 'rounded' %>
              <% end %>
            <% end %>
          </div>
          <div class="col-span-2">
            <div class="mt-1 border-2 border-gray-300 border-dashed rounded-md px-6 pt-5 pb-6 flex justify-center">
              <div class="space-y-1 text-center">
                <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" aria-hidden="true">
                  <path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
                <div class="flex text-sm text-gray-600">
                  <%= f.label :header_image, class: 'relative cursor-pointer bg-white rounded-md font-medium text-brown-600 hover:text-brown-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-brown-500' do %>
                    <span>Upload a file</span>
                    <%= f.file_field :header_image, class: 'sr-only' %>
                  <% end %>
                  <p class="pl-1">to change your header</p>
                </div>
                <p class="text-xs text-gray-500">PNG, JPG, GIF up to 10MB</p>
              </div>
            </div>
          </div>

          
          <fieldset class="col-span-3">
            <label class="block text-sm font-medium text-gray-700">Allowed page types</label>
            <div class="mt-2 border-t border-b border-gray-200 divide-y divide-gray-200 grid grid-cols-3">
              <%# todo: show user's ACTIVATED page types here and put the others behind an "all types" expander %>
              <% Rails.application.config.content_types[:all].each do |content_type| %>
                <div class="relative flex items-start py-2 col-span-1 text-sm">
                  <%= f.label "page_types[#{content_type.name}]", class: 'font-medium text-gray-700 select-none' do %>
                    <%= f.check_box "page_types[#{content_type.name}]", checked: page_collection.page_types.include?(content_type.name), class: 'focus:ring-notebook-blue h-6 w-6 border-gray-300 rounded mr-3 -mt-3' %>

                    <i class="material-icons <%= content_type.text_color %> mr-2 relative top-0.5">
                      <%= content_type.icon %>
                    </i>
                    <span class="flex-1 relative -top-1">
                      <%= content_type.name.pluralize %>
                    </span>
                  <% end %>
                </div>
              <% end %>
            </div>
          </fieldset>
        </div>
      </div>
      <div class="px-4 py-3 bg-gray-50 text-right sm:px-6">
        <%= f.submit 'Save', class: "#{PageCollection.color} border border-transparent rounded-md shadow-sm py-2 px-4 inline-flex justify-center text-sm font-medium text-white hover:bg-brown-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brown-500" %>
      </div>
    </div>

    <div class="shadow sm:rounded-md sm:overflow-hidden">
      <div class="bg-white py-6 px-4 space-y-6 sm:p-6">
        <div>
          <h3 class="text-lg leading-6 font-medium text-gray-900">Privacy & Submissions</h3>
          <p class="mt-1 text-sm text-gray-500">
            Collections are better with contributors!
          </p>
        </div>

        <div class="gap-6">
          <fieldset class="my-6">
            <legend class="text-base font-medium text-gray-900">Visibility</legend>
            <p class="text-sm text-gray-500">This setting controls who can see this collection.</p>
            <div class="mt-4 space-y-4">
              <%= f.label :privacy, class: 'block' do %>
                <%= f.radio_button :privacy, 'public', class: 'focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300' %>
                <span class="inline-block ml-2 text-sm font-medium text-gray-700">Public</span><span class="text-sm"> - Visible to anyone browsing collections</span>
              <% end %>
              <%= f.label :privacy, class: 'block' do %>
                <%= f.radio_button :privacy, 'private', class: 'focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300' %>
                <span class="inline-block ml-2 text-sm font-medium text-gray-700">Private</span><span class="text-sm"> - Visible only to you</span>
              <% end %>
            </div>
          </fieldset>

          <fieldset>
            <legend class="text-base font-medium text-gray-900">Page submissions</legend>
            <div class="my-4 space-y-4">
              <div class="flex items-start">
                <div class="text-sm items-center">
                  <%= f.label :allow_submissions, class: 'font-medium text-gray-700' do %>
                    <%= f.check_box :allow_submissions, class: 'mr-2 focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded' %>
                    Allow submissions from other users
                    <p class="text-gray-500 ml-7">Submissions are added to a review queue for you to approve or deny.</p>
                  <% end %>
                </div>
              </div>

              <div class="ml-7">
                <label for="about" class="block text-sm font-medium text-gray-700">Submission guidelines</label>
                <div class="mt-1">
                  <textarea id="about" name="about" rows="3" class="shadow-sm focus:ring-brown-500 focus:border-brown-500 mt-1 block w-full sm:text-sm border border-gray-300 rounded-md" placeholder="Write as little or as much as you'd like!"></textarea>
                </div>
                <p class="mt-2 text-xs text-gray-500">
                  What kinds of pages are you looking for? Anything you write here will be shown to users who are about to submit a page.
                </p>
              </div>

              <div>
                <div class="flex items-start">
                  <div class="text-sm items-center">
                    <%= f.label :auto_accept, class: 'font-medium text-gray-700' do %>
                      <%= f.check_box :auto_accept, class: 'mr-2 focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded' %>
                      Auto-accept all submissions
                      <p class="text-gray-500 ml-7">Submissions will skip the review queue and automatically publish.</p>
                    <% end %>
                  </div>
                </div>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
      <div class="px-4 py-3 bg-gray-50 text-right sm:px-6">
        <%= f.submit 'Save', class: "#{PageCollection.color} border border-transparent rounded-md shadow-sm py-2 px-4 inline-flex justify-center text-sm font-medium text-white hover:bg-brown-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brown-500" %>
      </div>
    </div>
  <% end %>
</div>
